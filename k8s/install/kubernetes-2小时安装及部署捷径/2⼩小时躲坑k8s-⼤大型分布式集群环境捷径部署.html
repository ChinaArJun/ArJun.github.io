<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2小时躲坑k8s-大型分布式集群环境捷径部署 | AJ</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <script>
            var _hmt = _hmt || [];
            (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?51b8c2e72d1adf96524638ce85bb7d72";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);

            // 引入谷歌,不需要可删除这段
            var hm1 = document.createElement("script");
            hm1.src = "https://www.googletagmanager.com/gtag/js?id=G-B7351EYS04";
            var s1 = document.getElementsByTagName("script")[0]; 
            s1.parentNode.insertBefore(hm1, s1);
            })();

            // 谷歌加载,不需要可删除
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-B7351EYS04');
        </script>
    <meta name="description" content="阿俊博客|记录一个程序员的成长历程 阿俊博客(blog.zhequtao.com)记录一个后端程序员的成长历程,分享他的学习笔记和心得,还有些开发必备技巧哦! java golang web html dev开发">
    <link rel="preload" href="/assets/css/0.styles.a3df589e.css" as="style"><link rel="preload" href="/assets/js/app.5c147ff7.js" as="script"><link rel="preload" href="/assets/js/3.6f8da2b4.js" as="script"><link rel="preload" href="/assets/js/5.679f705d.js" as="script"><link rel="preload" href="/assets/js/4.66391984.js" as="script"><link rel="prefetch" href="/assets/js/10.4b5a5e91.js"><link rel="prefetch" href="/assets/js/100.c62c1e1d.js"><link rel="prefetch" href="/assets/js/101.9a5fda7e.js"><link rel="prefetch" href="/assets/js/102.d929f266.js"><link rel="prefetch" href="/assets/js/103.afd7522a.js"><link rel="prefetch" href="/assets/js/104.64c7feb7.js"><link rel="prefetch" href="/assets/js/105.a8e3fc73.js"><link rel="prefetch" href="/assets/js/106.db4e1b9b.js"><link rel="prefetch" href="/assets/js/107.d156753f.js"><link rel="prefetch" href="/assets/js/108.0a660ced.js"><link rel="prefetch" href="/assets/js/109.110c78ee.js"><link rel="prefetch" href="/assets/js/11.353f12c8.js"><link rel="prefetch" href="/assets/js/110.acc04cc2.js"><link rel="prefetch" href="/assets/js/111.dc10e558.js"><link rel="prefetch" href="/assets/js/112.4c566e7e.js"><link rel="prefetch" href="/assets/js/113.0023a406.js"><link rel="prefetch" href="/assets/js/114.a65fad47.js"><link rel="prefetch" href="/assets/js/115.614952ef.js"><link rel="prefetch" href="/assets/js/116.37bc4d01.js"><link rel="prefetch" href="/assets/js/117.babb7a3d.js"><link rel="prefetch" href="/assets/js/118.1c7ed79a.js"><link rel="prefetch" href="/assets/js/119.707f5468.js"><link rel="prefetch" href="/assets/js/12.99c3cac8.js"><link rel="prefetch" href="/assets/js/120.6d0cbc5b.js"><link rel="prefetch" href="/assets/js/121.75ec26b4.js"><link rel="prefetch" href="/assets/js/122.176a52b7.js"><link rel="prefetch" href="/assets/js/123.be78455f.js"><link rel="prefetch" href="/assets/js/124.c7f09f7b.js"><link rel="prefetch" href="/assets/js/125.9b79b6a8.js"><link rel="prefetch" href="/assets/js/126.d629ade2.js"><link rel="prefetch" href="/assets/js/127.01119fe0.js"><link rel="prefetch" href="/assets/js/128.b0f8c5a2.js"><link rel="prefetch" href="/assets/js/129.921bb45e.js"><link rel="prefetch" href="/assets/js/13.bd0d5889.js"><link rel="prefetch" href="/assets/js/130.de8fc40d.js"><link rel="prefetch" href="/assets/js/131.50e7cbba.js"><link rel="prefetch" href="/assets/js/132.139c37a3.js"><link rel="prefetch" href="/assets/js/133.6403e3a2.js"><link rel="prefetch" href="/assets/js/134.4c234fe7.js"><link rel="prefetch" href="/assets/js/135.6165f7af.js"><link rel="prefetch" href="/assets/js/136.6bfd25b0.js"><link rel="prefetch" href="/assets/js/137.811a109a.js"><link rel="prefetch" href="/assets/js/138.ba31e677.js"><link rel="prefetch" href="/assets/js/139.b1a4a683.js"><link rel="prefetch" href="/assets/js/14.76f7934b.js"><link rel="prefetch" href="/assets/js/140.c2f91d7e.js"><link rel="prefetch" href="/assets/js/141.6a50367d.js"><link rel="prefetch" href="/assets/js/142.480e7c12.js"><link rel="prefetch" href="/assets/js/143.469f1cba.js"><link rel="prefetch" href="/assets/js/144.98246912.js"><link rel="prefetch" href="/assets/js/145.7c76209f.js"><link rel="prefetch" href="/assets/js/146.8fc21a0c.js"><link rel="prefetch" href="/assets/js/147.e483b750.js"><link rel="prefetch" href="/assets/js/148.e1c781a1.js"><link rel="prefetch" href="/assets/js/149.64feb5a7.js"><link rel="prefetch" href="/assets/js/15.38c8e1ff.js"><link rel="prefetch" href="/assets/js/150.572da0f0.js"><link rel="prefetch" href="/assets/js/151.075435cd.js"><link rel="prefetch" href="/assets/js/152.0441dac6.js"><link rel="prefetch" href="/assets/js/153.aedeb5e6.js"><link rel="prefetch" href="/assets/js/154.50545445.js"><link rel="prefetch" href="/assets/js/155.da2dce9d.js"><link rel="prefetch" href="/assets/js/156.1dab92a1.js"><link rel="prefetch" href="/assets/js/157.a08ce856.js"><link rel="prefetch" href="/assets/js/158.0b90a2a0.js"><link rel="prefetch" href="/assets/js/159.2cf47684.js"><link rel="prefetch" href="/assets/js/16.eb4da6d6.js"><link rel="prefetch" href="/assets/js/160.ca0619f3.js"><link rel="prefetch" href="/assets/js/161.c5991549.js"><link rel="prefetch" href="/assets/js/162.00f5e335.js"><link rel="prefetch" href="/assets/js/163.dc181b3c.js"><link rel="prefetch" href="/assets/js/164.9ea6ac06.js"><link rel="prefetch" href="/assets/js/165.2412525f.js"><link rel="prefetch" href="/assets/js/166.bf24eaf4.js"><link rel="prefetch" href="/assets/js/167.743922aa.js"><link rel="prefetch" href="/assets/js/168.1b6ec0ac.js"><link rel="prefetch" href="/assets/js/169.9d409bfc.js"><link rel="prefetch" href="/assets/js/17.51f6add1.js"><link rel="prefetch" href="/assets/js/170.ca3bd7af.js"><link rel="prefetch" href="/assets/js/171.d9fea0a5.js"><link rel="prefetch" href="/assets/js/172.5b3ab248.js"><link rel="prefetch" href="/assets/js/173.274c9c2a.js"><link rel="prefetch" href="/assets/js/174.78ef373a.js"><link rel="prefetch" href="/assets/js/175.b4dd7fbb.js"><link rel="prefetch" href="/assets/js/176.613d9311.js"><link rel="prefetch" href="/assets/js/177.2591fe00.js"><link rel="prefetch" href="/assets/js/178.e1129ac7.js"><link rel="prefetch" href="/assets/js/179.ffb172e0.js"><link rel="prefetch" href="/assets/js/18.069d71d4.js"><link rel="prefetch" href="/assets/js/180.1ea766cf.js"><link rel="prefetch" href="/assets/js/181.8052393d.js"><link rel="prefetch" href="/assets/js/182.02d4f408.js"><link rel="prefetch" href="/assets/js/183.596ae53e.js"><link rel="prefetch" href="/assets/js/184.4d769471.js"><link rel="prefetch" href="/assets/js/185.b2331a59.js"><link rel="prefetch" href="/assets/js/186.58724d4a.js"><link rel="prefetch" href="/assets/js/187.dab25224.js"><link rel="prefetch" href="/assets/js/188.393a9867.js"><link rel="prefetch" href="/assets/js/189.89a43799.js"><link rel="prefetch" href="/assets/js/19.9371c2cc.js"><link rel="prefetch" href="/assets/js/190.786df186.js"><link rel="prefetch" href="/assets/js/191.867dfecd.js"><link rel="prefetch" href="/assets/js/192.ed0bfadd.js"><link rel="prefetch" href="/assets/js/193.09af240f.js"><link rel="prefetch" href="/assets/js/194.15e6b384.js"><link rel="prefetch" href="/assets/js/195.527318c9.js"><link rel="prefetch" href="/assets/js/196.555755dc.js"><link rel="prefetch" href="/assets/js/197.c1154fac.js"><link rel="prefetch" href="/assets/js/198.8fc03cee.js"><link rel="prefetch" href="/assets/js/199.aa9d67fa.js"><link rel="prefetch" href="/assets/js/2.5672327d.js"><link rel="prefetch" href="/assets/js/20.f1d6dcae.js"><link rel="prefetch" href="/assets/js/200.4cb9f291.js"><link rel="prefetch" href="/assets/js/201.e3c96db2.js"><link rel="prefetch" href="/assets/js/202.f2e5c1ff.js"><link rel="prefetch" href="/assets/js/203.f7d893a2.js"><link rel="prefetch" href="/assets/js/204.e07c637e.js"><link rel="prefetch" href="/assets/js/205.d71a5fac.js"><link rel="prefetch" href="/assets/js/206.5b7722f0.js"><link rel="prefetch" href="/assets/js/207.19e5470c.js"><link rel="prefetch" href="/assets/js/208.90074c63.js"><link rel="prefetch" href="/assets/js/209.b8a49ed8.js"><link rel="prefetch" href="/assets/js/21.5f27f6c9.js"><link rel="prefetch" href="/assets/js/210.1c90bd49.js"><link rel="prefetch" href="/assets/js/211.543a9915.js"><link rel="prefetch" href="/assets/js/212.b5db2c6a.js"><link rel="prefetch" href="/assets/js/213.cd144d80.js"><link rel="prefetch" href="/assets/js/214.0a9242c0.js"><link rel="prefetch" href="/assets/js/215.c460ecfb.js"><link rel="prefetch" href="/assets/js/216.84518c6d.js"><link rel="prefetch" href="/assets/js/217.20c1fc83.js"><link rel="prefetch" href="/assets/js/218.4103adc5.js"><link rel="prefetch" href="/assets/js/219.f09b53b8.js"><link rel="prefetch" href="/assets/js/22.8300f40f.js"><link rel="prefetch" href="/assets/js/220.d0a734a4.js"><link rel="prefetch" href="/assets/js/221.525e3d50.js"><link rel="prefetch" href="/assets/js/222.01896f19.js"><link rel="prefetch" href="/assets/js/223.9b8a7b52.js"><link rel="prefetch" href="/assets/js/224.44076aaa.js"><link rel="prefetch" href="/assets/js/225.2c9a9704.js"><link rel="prefetch" href="/assets/js/226.bf190998.js"><link rel="prefetch" href="/assets/js/227.e7572f6a.js"><link rel="prefetch" href="/assets/js/228.1dc30f97.js"><link rel="prefetch" href="/assets/js/229.90ed3bea.js"><link rel="prefetch" href="/assets/js/23.188026c1.js"><link rel="prefetch" href="/assets/js/230.60556979.js"><link rel="prefetch" href="/assets/js/231.48990312.js"><link rel="prefetch" href="/assets/js/232.5b0c3a81.js"><link rel="prefetch" href="/assets/js/233.bc373bca.js"><link rel="prefetch" href="/assets/js/234.56fc6933.js"><link rel="prefetch" href="/assets/js/235.5fa2f882.js"><link rel="prefetch" href="/assets/js/236.8e119927.js"><link rel="prefetch" href="/assets/js/237.3f4407d7.js"><link rel="prefetch" href="/assets/js/238.e15ec2c4.js"><link rel="prefetch" href="/assets/js/239.6d0bf37a.js"><link rel="prefetch" href="/assets/js/24.41212451.js"><link rel="prefetch" href="/assets/js/240.47d83ce2.js"><link rel="prefetch" href="/assets/js/241.0061f3ab.js"><link rel="prefetch" href="/assets/js/242.31db1992.js"><link rel="prefetch" href="/assets/js/243.0332d01f.js"><link rel="prefetch" href="/assets/js/244.0cacff60.js"><link rel="prefetch" href="/assets/js/245.708c1b83.js"><link rel="prefetch" href="/assets/js/246.6379d82c.js"><link rel="prefetch" href="/assets/js/247.a83df759.js"><link rel="prefetch" href="/assets/js/248.7d0c3252.js"><link rel="prefetch" href="/assets/js/249.e1ba3371.js"><link rel="prefetch" href="/assets/js/25.8319c8ce.js"><link rel="prefetch" href="/assets/js/250.dc231e4b.js"><link rel="prefetch" href="/assets/js/251.58949eb6.js"><link rel="prefetch" href="/assets/js/252.2fa75cec.js"><link rel="prefetch" href="/assets/js/253.891f7c04.js"><link rel="prefetch" href="/assets/js/254.2e3f4009.js"><link rel="prefetch" href="/assets/js/255.de702e81.js"><link rel="prefetch" href="/assets/js/256.8690fe2d.js"><link rel="prefetch" href="/assets/js/257.7e10ca01.js"><link rel="prefetch" href="/assets/js/258.94e90435.js"><link rel="prefetch" href="/assets/js/259.f05adfa7.js"><link rel="prefetch" href="/assets/js/26.6c8595b8.js"><link rel="prefetch" href="/assets/js/260.d1abb235.js"><link rel="prefetch" href="/assets/js/261.de8957d0.js"><link rel="prefetch" href="/assets/js/262.0b619334.js"><link rel="prefetch" href="/assets/js/263.9e9d41b1.js"><link rel="prefetch" href="/assets/js/264.660ced50.js"><link rel="prefetch" href="/assets/js/265.8518a32a.js"><link rel="prefetch" href="/assets/js/266.cd6cc0ba.js"><link rel="prefetch" href="/assets/js/267.7bb527e9.js"><link rel="prefetch" href="/assets/js/268.73399a77.js"><link rel="prefetch" href="/assets/js/269.943416a5.js"><link rel="prefetch" href="/assets/js/27.1a6f9a0e.js"><link rel="prefetch" href="/assets/js/270.1fc5eab6.js"><link rel="prefetch" href="/assets/js/271.96825cd4.js"><link rel="prefetch" href="/assets/js/272.f37316ad.js"><link rel="prefetch" href="/assets/js/273.eaf2891d.js"><link rel="prefetch" href="/assets/js/274.234b463c.js"><link rel="prefetch" href="/assets/js/275.c81cea78.js"><link rel="prefetch" href="/assets/js/276.282321a6.js"><link rel="prefetch" href="/assets/js/277.b117f0ed.js"><link rel="prefetch" href="/assets/js/278.91e43a90.js"><link rel="prefetch" href="/assets/js/279.ec7dd69b.js"><link rel="prefetch" href="/assets/js/28.d7fbceb4.js"><link rel="prefetch" href="/assets/js/280.428714d4.js"><link rel="prefetch" href="/assets/js/281.79d83117.js"><link rel="prefetch" href="/assets/js/282.e0c3d42b.js"><link rel="prefetch" href="/assets/js/283.4237c346.js"><link rel="prefetch" href="/assets/js/284.29b777d3.js"><link rel="prefetch" href="/assets/js/285.1bdcf69c.js"><link rel="prefetch" href="/assets/js/286.8f654f21.js"><link rel="prefetch" href="/assets/js/287.75668017.js"><link rel="prefetch" href="/assets/js/288.46a35611.js"><link rel="prefetch" href="/assets/js/289.3ff1d2d8.js"><link rel="prefetch" href="/assets/js/29.03cbb6e8.js"><link rel="prefetch" href="/assets/js/290.55e332a5.js"><link rel="prefetch" href="/assets/js/291.48c7fc70.js"><link rel="prefetch" href="/assets/js/292.ed75ac73.js"><link rel="prefetch" href="/assets/js/293.2f1c355d.js"><link rel="prefetch" href="/assets/js/294.75bf419b.js"><link rel="prefetch" href="/assets/js/295.0b071009.js"><link rel="prefetch" href="/assets/js/296.a0a9a871.js"><link rel="prefetch" href="/assets/js/297.331ea5d7.js"><link rel="prefetch" href="/assets/js/298.1cd11a90.js"><link rel="prefetch" href="/assets/js/299.1cfb9d31.js"><link rel="prefetch" href="/assets/js/30.2c32302c.js"><link rel="prefetch" href="/assets/js/300.eabcf695.js"><link rel="prefetch" href="/assets/js/301.561884ac.js"><link rel="prefetch" href="/assets/js/302.1e8301fa.js"><link rel="prefetch" href="/assets/js/303.53fe2ec4.js"><link rel="prefetch" href="/assets/js/304.6c1dc9bc.js"><link rel="prefetch" href="/assets/js/305.c9a80f03.js"><link rel="prefetch" href="/assets/js/306.631fbc5f.js"><link rel="prefetch" href="/assets/js/307.b9e83c64.js"><link rel="prefetch" href="/assets/js/308.fdacf2b7.js"><link rel="prefetch" href="/assets/js/309.b5e9ed4c.js"><link rel="prefetch" href="/assets/js/31.9957ed3f.js"><link rel="prefetch" href="/assets/js/310.8cd8bb42.js"><link rel="prefetch" href="/assets/js/311.48f62320.js"><link rel="prefetch" href="/assets/js/312.7009b44f.js"><link rel="prefetch" href="/assets/js/313.51afdd51.js"><link rel="prefetch" href="/assets/js/314.a5f53605.js"><link rel="prefetch" href="/assets/js/315.a39f5032.js"><link rel="prefetch" href="/assets/js/316.45f957b9.js"><link rel="prefetch" href="/assets/js/317.41639721.js"><link rel="prefetch" href="/assets/js/318.856be845.js"><link rel="prefetch" href="/assets/js/319.e1abb280.js"><link rel="prefetch" href="/assets/js/32.98f2511d.js"><link rel="prefetch" href="/assets/js/320.1f97d86b.js"><link rel="prefetch" href="/assets/js/321.0fafcca6.js"><link rel="prefetch" href="/assets/js/322.1c567675.js"><link rel="prefetch" href="/assets/js/323.4c33deb6.js"><link rel="prefetch" href="/assets/js/324.51a15b29.js"><link rel="prefetch" href="/assets/js/325.1138715b.js"><link rel="prefetch" href="/assets/js/326.d036fece.js"><link rel="prefetch" href="/assets/js/327.1d7427ca.js"><link rel="prefetch" href="/assets/js/328.3eab7046.js"><link rel="prefetch" href="/assets/js/329.0b565831.js"><link rel="prefetch" href="/assets/js/33.86e115ec.js"><link rel="prefetch" href="/assets/js/330.d88fe8b1.js"><link rel="prefetch" href="/assets/js/331.beaaa95a.js"><link rel="prefetch" href="/assets/js/332.8009e884.js"><link rel="prefetch" href="/assets/js/333.53961183.js"><link rel="prefetch" href="/assets/js/334.4f438818.js"><link rel="prefetch" href="/assets/js/335.221d4c4c.js"><link rel="prefetch" href="/assets/js/336.a02dab81.js"><link rel="prefetch" href="/assets/js/337.1b5f827c.js"><link rel="prefetch" href="/assets/js/338.b66269ca.js"><link rel="prefetch" href="/assets/js/339.ec160296.js"><link rel="prefetch" href="/assets/js/34.dd2d4b6e.js"><link rel="prefetch" href="/assets/js/340.f210f23f.js"><link rel="prefetch" href="/assets/js/341.aad816f0.js"><link rel="prefetch" href="/assets/js/342.4d870fc6.js"><link rel="prefetch" href="/assets/js/343.e9f8dd8b.js"><link rel="prefetch" href="/assets/js/344.5cc364c7.js"><link rel="prefetch" href="/assets/js/345.c98059a0.js"><link rel="prefetch" href="/assets/js/346.f69868fd.js"><link rel="prefetch" href="/assets/js/347.301b5fa8.js"><link rel="prefetch" href="/assets/js/348.0cf07bb6.js"><link rel="prefetch" href="/assets/js/349.3835cca2.js"><link rel="prefetch" href="/assets/js/35.62bae804.js"><link rel="prefetch" href="/assets/js/350.11491eb5.js"><link rel="prefetch" href="/assets/js/351.5017bfb6.js"><link rel="prefetch" href="/assets/js/352.e26189eb.js"><link rel="prefetch" href="/assets/js/353.477f42c1.js"><link rel="prefetch" href="/assets/js/354.b5bc885d.js"><link rel="prefetch" href="/assets/js/355.3f41edfa.js"><link rel="prefetch" href="/assets/js/356.72633594.js"><link rel="prefetch" href="/assets/js/357.1e9e4258.js"><link rel="prefetch" href="/assets/js/358.1d7efdd6.js"><link rel="prefetch" href="/assets/js/359.fd9237ae.js"><link rel="prefetch" href="/assets/js/36.9046d0c6.js"><link rel="prefetch" href="/assets/js/360.ebad26ad.js"><link rel="prefetch" href="/assets/js/361.00a57a79.js"><link rel="prefetch" href="/assets/js/362.23f1052e.js"><link rel="prefetch" href="/assets/js/363.81e9a28d.js"><link rel="prefetch" href="/assets/js/364.018a0ecd.js"><link rel="prefetch" href="/assets/js/365.b095e4ff.js"><link rel="prefetch" href="/assets/js/366.18d19f1e.js"><link rel="prefetch" href="/assets/js/367.b17f2616.js"><link rel="prefetch" href="/assets/js/368.d7b8deae.js"><link rel="prefetch" href="/assets/js/369.50e7a4db.js"><link rel="prefetch" href="/assets/js/37.302be395.js"><link rel="prefetch" href="/assets/js/370.5eb3219d.js"><link rel="prefetch" href="/assets/js/371.a1deeca5.js"><link rel="prefetch" href="/assets/js/372.ac47d9f2.js"><link rel="prefetch" href="/assets/js/373.1ea38d8e.js"><link rel="prefetch" href="/assets/js/374.8dc2b5ca.js"><link rel="prefetch" href="/assets/js/375.144aa441.js"><link rel="prefetch" href="/assets/js/376.7323744d.js"><link rel="prefetch" href="/assets/js/377.a91dbd4d.js"><link rel="prefetch" href="/assets/js/378.b7be3231.js"><link rel="prefetch" href="/assets/js/379.face25c4.js"><link rel="prefetch" href="/assets/js/38.fda435de.js"><link rel="prefetch" href="/assets/js/380.88a0a2bd.js"><link rel="prefetch" href="/assets/js/381.b2cd27a6.js"><link rel="prefetch" href="/assets/js/382.a184e2f1.js"><link rel="prefetch" href="/assets/js/383.1a304896.js"><link rel="prefetch" href="/assets/js/384.b303f3ac.js"><link rel="prefetch" href="/assets/js/385.a7aca369.js"><link rel="prefetch" href="/assets/js/386.a682a393.js"><link rel="prefetch" href="/assets/js/387.fbeeee9e.js"><link rel="prefetch" href="/assets/js/388.f91568d5.js"><link rel="prefetch" href="/assets/js/389.b5ceafe0.js"><link rel="prefetch" href="/assets/js/39.b0a9d40f.js"><link rel="prefetch" href="/assets/js/390.29b9cad3.js"><link rel="prefetch" href="/assets/js/391.2ef31e80.js"><link rel="prefetch" href="/assets/js/392.4347c0b6.js"><link rel="prefetch" href="/assets/js/393.cb86d353.js"><link rel="prefetch" href="/assets/js/394.3531d37b.js"><link rel="prefetch" href="/assets/js/395.7c479c80.js"><link rel="prefetch" href="/assets/js/396.f71fcc6f.js"><link rel="prefetch" href="/assets/js/397.ae2dd99f.js"><link rel="prefetch" href="/assets/js/398.a9858a71.js"><link rel="prefetch" href="/assets/js/399.198e4b99.js"><link rel="prefetch" href="/assets/js/40.2c0e981b.js"><link rel="prefetch" href="/assets/js/400.e4e067fc.js"><link rel="prefetch" href="/assets/js/401.7bcc65d3.js"><link rel="prefetch" href="/assets/js/402.7e5e3238.js"><link rel="prefetch" href="/assets/js/403.043e55af.js"><link rel="prefetch" href="/assets/js/404.5dd73753.js"><link rel="prefetch" href="/assets/js/405.a2135bbc.js"><link rel="prefetch" href="/assets/js/406.a4d1e949.js"><link rel="prefetch" href="/assets/js/407.04f25941.js"><link rel="prefetch" href="/assets/js/408.2d4beecd.js"><link rel="prefetch" href="/assets/js/409.76e174d6.js"><link rel="prefetch" href="/assets/js/41.42c0af3f.js"><link rel="prefetch" href="/assets/js/410.db4a98ce.js"><link rel="prefetch" href="/assets/js/411.ac255fed.js"><link rel="prefetch" href="/assets/js/412.3ec584d7.js"><link rel="prefetch" href="/assets/js/413.718c5356.js"><link rel="prefetch" href="/assets/js/414.de107f46.js"><link rel="prefetch" href="/assets/js/415.48c31d73.js"><link rel="prefetch" href="/assets/js/416.ea778769.js"><link rel="prefetch" href="/assets/js/417.c5d1e577.js"><link rel="prefetch" href="/assets/js/418.2cc99764.js"><link rel="prefetch" href="/assets/js/419.fb58ce51.js"><link rel="prefetch" href="/assets/js/42.763c8667.js"><link rel="prefetch" href="/assets/js/420.6a9cc4fe.js"><link rel="prefetch" href="/assets/js/421.5c22ff45.js"><link rel="prefetch" href="/assets/js/422.c050833d.js"><link rel="prefetch" href="/assets/js/423.f1f1b897.js"><link rel="prefetch" href="/assets/js/424.1866d0a0.js"><link rel="prefetch" href="/assets/js/425.ffad76f7.js"><link rel="prefetch" href="/assets/js/426.d7e95d55.js"><link rel="prefetch" href="/assets/js/427.1063e25b.js"><link rel="prefetch" href="/assets/js/428.61c45055.js"><link rel="prefetch" href="/assets/js/429.403420f4.js"><link rel="prefetch" href="/assets/js/43.341e98a1.js"><link rel="prefetch" href="/assets/js/430.cccabd51.js"><link rel="prefetch" href="/assets/js/431.3dbc73e5.js"><link rel="prefetch" href="/assets/js/432.0cc536d3.js"><link rel="prefetch" href="/assets/js/433.14873d49.js"><link rel="prefetch" href="/assets/js/434.f326eed7.js"><link rel="prefetch" href="/assets/js/435.b768d2b5.js"><link rel="prefetch" href="/assets/js/436.087796ad.js"><link rel="prefetch" href="/assets/js/437.35558ef1.js"><link rel="prefetch" href="/assets/js/438.9f0f5649.js"><link rel="prefetch" href="/assets/js/439.2329b621.js"><link rel="prefetch" href="/assets/js/44.9ea0025a.js"><link rel="prefetch" href="/assets/js/440.71babbc1.js"><link rel="prefetch" href="/assets/js/441.859e278e.js"><link rel="prefetch" href="/assets/js/442.e73c1d3d.js"><link rel="prefetch" href="/assets/js/443.4da69ef2.js"><link rel="prefetch" href="/assets/js/444.d4140f36.js"><link rel="prefetch" href="/assets/js/445.d4c31485.js"><link rel="prefetch" href="/assets/js/446.3df1284e.js"><link rel="prefetch" href="/assets/js/447.bd1e5b5c.js"><link rel="prefetch" href="/assets/js/448.59bdcbf3.js"><link rel="prefetch" href="/assets/js/449.88739ae5.js"><link rel="prefetch" href="/assets/js/45.c53b1fb2.js"><link rel="prefetch" href="/assets/js/450.fe7c2f0e.js"><link rel="prefetch" href="/assets/js/451.7b1ab5e6.js"><link rel="prefetch" href="/assets/js/452.9b4c2025.js"><link rel="prefetch" href="/assets/js/453.620767e7.js"><link rel="prefetch" href="/assets/js/454.dda0d70f.js"><link rel="prefetch" href="/assets/js/455.f3fcce93.js"><link rel="prefetch" href="/assets/js/456.ac94aa38.js"><link rel="prefetch" href="/assets/js/457.30298ae8.js"><link rel="prefetch" href="/assets/js/458.308735ff.js"><link rel="prefetch" href="/assets/js/459.f0638add.js"><link rel="prefetch" href="/assets/js/46.c3cef915.js"><link rel="prefetch" href="/assets/js/460.c487433f.js"><link rel="prefetch" href="/assets/js/461.ebdfde69.js"><link rel="prefetch" href="/assets/js/462.ea4921b8.js"><link rel="prefetch" href="/assets/js/463.d8388947.js"><link rel="prefetch" href="/assets/js/464.47ddd916.js"><link rel="prefetch" href="/assets/js/465.fbd3cf86.js"><link rel="prefetch" href="/assets/js/466.e7ffbaa9.js"><link rel="prefetch" href="/assets/js/467.928c5de7.js"><link rel="prefetch" href="/assets/js/468.6f24b38f.js"><link rel="prefetch" href="/assets/js/469.2a06a40d.js"><link rel="prefetch" href="/assets/js/47.94f84716.js"><link rel="prefetch" href="/assets/js/470.aca2b61b.js"><link rel="prefetch" href="/assets/js/471.69c8913e.js"><link rel="prefetch" href="/assets/js/472.6ce87010.js"><link rel="prefetch" href="/assets/js/473.c7af250c.js"><link rel="prefetch" href="/assets/js/474.5a8c3dc7.js"><link rel="prefetch" href="/assets/js/475.0ed67be8.js"><link rel="prefetch" href="/assets/js/476.18dfec2b.js"><link rel="prefetch" href="/assets/js/477.9f372926.js"><link rel="prefetch" href="/assets/js/478.d2729f0b.js"><link rel="prefetch" href="/assets/js/479.cb82932f.js"><link rel="prefetch" href="/assets/js/48.ea0a3cf3.js"><link rel="prefetch" href="/assets/js/480.52df6179.js"><link rel="prefetch" href="/assets/js/481.630a8e82.js"><link rel="prefetch" href="/assets/js/482.d386d052.js"><link rel="prefetch" href="/assets/js/483.dffc7782.js"><link rel="prefetch" href="/assets/js/484.1e4da932.js"><link rel="prefetch" href="/assets/js/485.3eafc667.js"><link rel="prefetch" href="/assets/js/486.6a564492.js"><link rel="prefetch" href="/assets/js/487.07c26c8e.js"><link rel="prefetch" href="/assets/js/488.9b3f1760.js"><link rel="prefetch" href="/assets/js/489.9fd047a1.js"><link rel="prefetch" href="/assets/js/49.6ec28e6f.js"><link rel="prefetch" href="/assets/js/490.20d8d9ce.js"><link rel="prefetch" href="/assets/js/491.b7452567.js"><link rel="prefetch" href="/assets/js/492.76245762.js"><link rel="prefetch" href="/assets/js/493.47340b0a.js"><link rel="prefetch" href="/assets/js/494.a8ca4bf4.js"><link rel="prefetch" href="/assets/js/495.eada091a.js"><link rel="prefetch" href="/assets/js/496.c1dab338.js"><link rel="prefetch" href="/assets/js/497.0c18c0d6.js"><link rel="prefetch" href="/assets/js/498.f21988d3.js"><link rel="prefetch" href="/assets/js/499.12c1fdb6.js"><link rel="prefetch" href="/assets/js/50.ae832d8c.js"><link rel="prefetch" href="/assets/js/500.7a227413.js"><link rel="prefetch" href="/assets/js/501.4fd785f1.js"><link rel="prefetch" href="/assets/js/502.1461c5be.js"><link rel="prefetch" href="/assets/js/503.9f60c131.js"><link rel="prefetch" href="/assets/js/504.e7bf932a.js"><link rel="prefetch" href="/assets/js/505.d7e17e90.js"><link rel="prefetch" href="/assets/js/506.695e34fa.js"><link rel="prefetch" href="/assets/js/507.07d93b07.js"><link rel="prefetch" href="/assets/js/508.b0b70a46.js"><link rel="prefetch" href="/assets/js/509.937c86dc.js"><link rel="prefetch" href="/assets/js/51.9a6e2bca.js"><link rel="prefetch" href="/assets/js/510.ccca0e85.js"><link rel="prefetch" href="/assets/js/511.06d9a938.js"><link rel="prefetch" href="/assets/js/512.2ede9fec.js"><link rel="prefetch" href="/assets/js/513.1b1e439b.js"><link rel="prefetch" href="/assets/js/514.b6d25dec.js"><link rel="prefetch" href="/assets/js/515.3bc1c186.js"><link rel="prefetch" href="/assets/js/516.4f6999aa.js"><link rel="prefetch" href="/assets/js/517.9a732e48.js"><link rel="prefetch" href="/assets/js/518.33108fc3.js"><link rel="prefetch" href="/assets/js/519.5dfaf5a1.js"><link rel="prefetch" href="/assets/js/52.98e2a2d0.js"><link rel="prefetch" href="/assets/js/520.26430727.js"><link rel="prefetch" href="/assets/js/521.79d2afd8.js"><link rel="prefetch" href="/assets/js/522.8e88e4f6.js"><link rel="prefetch" href="/assets/js/523.b7d8fe66.js"><link rel="prefetch" href="/assets/js/524.efc8129d.js"><link rel="prefetch" href="/assets/js/525.ee50fa18.js"><link rel="prefetch" href="/assets/js/526.bb7785dc.js"><link rel="prefetch" href="/assets/js/527.70411834.js"><link rel="prefetch" href="/assets/js/528.13e1f3e5.js"><link rel="prefetch" href="/assets/js/529.b39d9553.js"><link rel="prefetch" href="/assets/js/53.deb0654e.js"><link rel="prefetch" href="/assets/js/530.b4336d18.js"><link rel="prefetch" href="/assets/js/531.832fa3ac.js"><link rel="prefetch" href="/assets/js/532.452d90af.js"><link rel="prefetch" href="/assets/js/533.32001d36.js"><link rel="prefetch" href="/assets/js/534.86fa5822.js"><link rel="prefetch" href="/assets/js/535.3fb37127.js"><link rel="prefetch" href="/assets/js/536.abb136b8.js"><link rel="prefetch" href="/assets/js/537.c62d416b.js"><link rel="prefetch" href="/assets/js/538.24d8e1b4.js"><link rel="prefetch" href="/assets/js/539.f91aad56.js"><link rel="prefetch" href="/assets/js/54.001afd75.js"><link rel="prefetch" href="/assets/js/540.637be162.js"><link rel="prefetch" href="/assets/js/541.3a5872d1.js"><link rel="prefetch" href="/assets/js/542.80229fd5.js"><link rel="prefetch" href="/assets/js/543.cb93bedc.js"><link rel="prefetch" href="/assets/js/544.31bc79a9.js"><link rel="prefetch" href="/assets/js/545.3d1aa48a.js"><link rel="prefetch" href="/assets/js/546.520547b0.js"><link rel="prefetch" href="/assets/js/547.af595212.js"><link rel="prefetch" href="/assets/js/548.062d8c87.js"><link rel="prefetch" href="/assets/js/549.3079e87e.js"><link rel="prefetch" href="/assets/js/55.af997c47.js"><link rel="prefetch" href="/assets/js/550.368cc985.js"><link rel="prefetch" href="/assets/js/551.4facb234.js"><link rel="prefetch" href="/assets/js/552.16c08166.js"><link rel="prefetch" href="/assets/js/553.fb0b9be4.js"><link rel="prefetch" href="/assets/js/554.2666eade.js"><link rel="prefetch" href="/assets/js/555.4ace4e18.js"><link rel="prefetch" href="/assets/js/556.4edbf908.js"><link rel="prefetch" href="/assets/js/557.21f09403.js"><link rel="prefetch" href="/assets/js/558.cce15a6e.js"><link rel="prefetch" href="/assets/js/559.6bbf8cb0.js"><link rel="prefetch" href="/assets/js/56.66b6afc3.js"><link rel="prefetch" href="/assets/js/560.7ad3cdd6.js"><link rel="prefetch" href="/assets/js/561.c6c9d9bf.js"><link rel="prefetch" href="/assets/js/562.cd9e55b9.js"><link rel="prefetch" href="/assets/js/563.e6c3e1cf.js"><link rel="prefetch" href="/assets/js/564.25239404.js"><link rel="prefetch" href="/assets/js/565.66a6f244.js"><link rel="prefetch" href="/assets/js/566.e7347bae.js"><link rel="prefetch" href="/assets/js/567.fc1e84ae.js"><link rel="prefetch" href="/assets/js/568.ba7d76a5.js"><link rel="prefetch" href="/assets/js/569.ba06f2d1.js"><link rel="prefetch" href="/assets/js/57.7c2d860e.js"><link rel="prefetch" href="/assets/js/570.71bce715.js"><link rel="prefetch" href="/assets/js/571.a660fcd2.js"><link rel="prefetch" href="/assets/js/572.62cdd3fe.js"><link rel="prefetch" href="/assets/js/573.5138efa9.js"><link rel="prefetch" href="/assets/js/574.0b684d6e.js"><link rel="prefetch" href="/assets/js/575.8f2fa712.js"><link rel="prefetch" href="/assets/js/576.6b22f4a2.js"><link rel="prefetch" href="/assets/js/577.340e2b2b.js"><link rel="prefetch" href="/assets/js/578.fee85fe9.js"><link rel="prefetch" href="/assets/js/579.570621e1.js"><link rel="prefetch" href="/assets/js/58.8ba45548.js"><link rel="prefetch" href="/assets/js/580.a186cb48.js"><link rel="prefetch" href="/assets/js/581.d9bc513b.js"><link rel="prefetch" href="/assets/js/582.47f7050e.js"><link rel="prefetch" href="/assets/js/583.a9bc4ce3.js"><link rel="prefetch" href="/assets/js/584.8cf2c18f.js"><link rel="prefetch" href="/assets/js/585.7af26add.js"><link rel="prefetch" href="/assets/js/586.94fe2a3e.js"><link rel="prefetch" href="/assets/js/587.ae96e9f4.js"><link rel="prefetch" href="/assets/js/588.a0038ff8.js"><link rel="prefetch" href="/assets/js/589.50e2d84f.js"><link rel="prefetch" href="/assets/js/59.4bbd0aba.js"><link rel="prefetch" href="/assets/js/590.2f6be63f.js"><link rel="prefetch" href="/assets/js/591.26cda004.js"><link rel="prefetch" href="/assets/js/592.953a8175.js"><link rel="prefetch" href="/assets/js/593.21f09515.js"><link rel="prefetch" href="/assets/js/594.4f3234a1.js"><link rel="prefetch" href="/assets/js/595.45e580f6.js"><link rel="prefetch" href="/assets/js/596.7d9fd491.js"><link rel="prefetch" href="/assets/js/597.9def5305.js"><link rel="prefetch" href="/assets/js/598.267d37e7.js"><link rel="prefetch" href="/assets/js/599.16225da5.js"><link rel="prefetch" href="/assets/js/6.13d307bf.js"><link rel="prefetch" href="/assets/js/60.c3d12508.js"><link rel="prefetch" href="/assets/js/600.9d1a1c59.js"><link rel="prefetch" href="/assets/js/601.0e18f099.js"><link rel="prefetch" href="/assets/js/602.cc9e5564.js"><link rel="prefetch" href="/assets/js/603.c6369079.js"><link rel="prefetch" href="/assets/js/604.6b24694f.js"><link rel="prefetch" href="/assets/js/605.1a213fab.js"><link rel="prefetch" href="/assets/js/606.d54b315a.js"><link rel="prefetch" href="/assets/js/607.4c566481.js"><link rel="prefetch" href="/assets/js/608.b9f66a90.js"><link rel="prefetch" href="/assets/js/609.5e529708.js"><link rel="prefetch" href="/assets/js/61.d954ae69.js"><link rel="prefetch" href="/assets/js/610.b5aa0a9b.js"><link rel="prefetch" href="/assets/js/611.318687e8.js"><link rel="prefetch" href="/assets/js/612.e814aa3a.js"><link rel="prefetch" href="/assets/js/613.ef81ebee.js"><link rel="prefetch" href="/assets/js/614.f4e6cf01.js"><link rel="prefetch" href="/assets/js/615.186ef763.js"><link rel="prefetch" href="/assets/js/616.71134db9.js"><link rel="prefetch" href="/assets/js/617.8d8af715.js"><link rel="prefetch" href="/assets/js/618.691d7fac.js"><link rel="prefetch" href="/assets/js/619.d8a5e3d1.js"><link rel="prefetch" href="/assets/js/62.699b2238.js"><link rel="prefetch" href="/assets/js/620.5e7877fb.js"><link rel="prefetch" href="/assets/js/621.7260020c.js"><link rel="prefetch" href="/assets/js/622.cd8341ff.js"><link rel="prefetch" href="/assets/js/623.313745f2.js"><link rel="prefetch" href="/assets/js/624.9f850c82.js"><link rel="prefetch" href="/assets/js/625.1252faa8.js"><link rel="prefetch" href="/assets/js/626.285b9360.js"><link rel="prefetch" href="/assets/js/627.ae6101cd.js"><link rel="prefetch" href="/assets/js/628.e2a6ba3d.js"><link rel="prefetch" href="/assets/js/629.304fd703.js"><link rel="prefetch" href="/assets/js/63.b133be92.js"><link rel="prefetch" href="/assets/js/630.33727340.js"><link rel="prefetch" href="/assets/js/631.b9d48b55.js"><link rel="prefetch" href="/assets/js/632.03f95752.js"><link rel="prefetch" href="/assets/js/633.e6fb8343.js"><link rel="prefetch" href="/assets/js/634.d623efd9.js"><link rel="prefetch" href="/assets/js/635.e4e731cd.js"><link rel="prefetch" href="/assets/js/636.9dab31ee.js"><link rel="prefetch" href="/assets/js/637.7bb17dd0.js"><link rel="prefetch" href="/assets/js/638.52baa86f.js"><link rel="prefetch" href="/assets/js/639.05113a43.js"><link rel="prefetch" href="/assets/js/64.19ae7587.js"><link rel="prefetch" href="/assets/js/640.b689169c.js"><link rel="prefetch" href="/assets/js/641.b119bdc4.js"><link rel="prefetch" href="/assets/js/642.384e8901.js"><link rel="prefetch" href="/assets/js/643.89a2ccb2.js"><link rel="prefetch" href="/assets/js/644.511f715e.js"><link rel="prefetch" href="/assets/js/645.de32f6ef.js"><link rel="prefetch" href="/assets/js/646.f9b8f6a2.js"><link rel="prefetch" href="/assets/js/647.00ebebe2.js"><link rel="prefetch" href="/assets/js/648.1240e9c1.js"><link rel="prefetch" href="/assets/js/649.b3c89f47.js"><link rel="prefetch" href="/assets/js/65.1c5f80fa.js"><link rel="prefetch" href="/assets/js/650.5953f5c4.js"><link rel="prefetch" href="/assets/js/651.7891542c.js"><link rel="prefetch" href="/assets/js/652.71278fe4.js"><link rel="prefetch" href="/assets/js/653.232cdad0.js"><link rel="prefetch" href="/assets/js/654.78c26cd6.js"><link rel="prefetch" href="/assets/js/655.03634bb9.js"><link rel="prefetch" href="/assets/js/656.366064b7.js"><link rel="prefetch" href="/assets/js/657.1f31bac4.js"><link rel="prefetch" href="/assets/js/658.822236d3.js"><link rel="prefetch" href="/assets/js/659.396f4c5e.js"><link rel="prefetch" href="/assets/js/66.69c9ec09.js"><link rel="prefetch" href="/assets/js/660.856dfb8e.js"><link rel="prefetch" href="/assets/js/661.fb243b69.js"><link rel="prefetch" href="/assets/js/662.61d99ee8.js"><link rel="prefetch" href="/assets/js/663.cd170c04.js"><link rel="prefetch" href="/assets/js/664.95f951ed.js"><link rel="prefetch" href="/assets/js/665.c5cac381.js"><link rel="prefetch" href="/assets/js/666.3c1a98c1.js"><link rel="prefetch" href="/assets/js/667.7716aaff.js"><link rel="prefetch" href="/assets/js/668.7f57a69f.js"><link rel="prefetch" href="/assets/js/669.0b82cc0a.js"><link rel="prefetch" href="/assets/js/67.486fe682.js"><link rel="prefetch" href="/assets/js/670.8d1932cd.js"><link rel="prefetch" href="/assets/js/671.81fe78e0.js"><link rel="prefetch" href="/assets/js/672.efdf405d.js"><link rel="prefetch" href="/assets/js/673.727f99f1.js"><link rel="prefetch" href="/assets/js/674.fd417a33.js"><link rel="prefetch" href="/assets/js/675.27b7f1c2.js"><link rel="prefetch" href="/assets/js/676.32633bb8.js"><link rel="prefetch" href="/assets/js/677.3d027ac5.js"><link rel="prefetch" href="/assets/js/678.60307a72.js"><link rel="prefetch" href="/assets/js/679.45a9ee44.js"><link rel="prefetch" href="/assets/js/68.ef2c724d.js"><link rel="prefetch" href="/assets/js/680.3d304ca9.js"><link rel="prefetch" href="/assets/js/681.c3a380e5.js"><link rel="prefetch" href="/assets/js/682.3b82f377.js"><link rel="prefetch" href="/assets/js/683.ae908d5e.js"><link rel="prefetch" href="/assets/js/684.26dc1fa2.js"><link rel="prefetch" href="/assets/js/685.fddc9a4b.js"><link rel="prefetch" href="/assets/js/686.37fc5c3b.js"><link rel="prefetch" href="/assets/js/687.52ae01df.js"><link rel="prefetch" href="/assets/js/688.2ca5e88b.js"><link rel="prefetch" href="/assets/js/689.376156c5.js"><link rel="prefetch" href="/assets/js/69.b6536635.js"><link rel="prefetch" href="/assets/js/690.75ae0627.js"><link rel="prefetch" href="/assets/js/691.775ccc20.js"><link rel="prefetch" href="/assets/js/692.bb1f0cf8.js"><link rel="prefetch" href="/assets/js/693.bc06e83f.js"><link rel="prefetch" href="/assets/js/694.c086cb37.js"><link rel="prefetch" href="/assets/js/695.3540e2c6.js"><link rel="prefetch" href="/assets/js/696.226cecda.js"><link rel="prefetch" href="/assets/js/697.29e7fcb3.js"><link rel="prefetch" href="/assets/js/698.7366e9c9.js"><link rel="prefetch" href="/assets/js/699.7a9061e3.js"><link rel="prefetch" href="/assets/js/7.01e7061b.js"><link rel="prefetch" href="/assets/js/70.975ded78.js"><link rel="prefetch" href="/assets/js/700.02329f00.js"><link rel="prefetch" href="/assets/js/701.0ff844b7.js"><link rel="prefetch" href="/assets/js/702.69f7ee46.js"><link rel="prefetch" href="/assets/js/703.bca37150.js"><link rel="prefetch" href="/assets/js/704.eb9d033d.js"><link rel="prefetch" href="/assets/js/705.5d47301b.js"><link rel="prefetch" href="/assets/js/706.a7a4e00c.js"><link rel="prefetch" href="/assets/js/707.623cf01a.js"><link rel="prefetch" href="/assets/js/708.97aacf45.js"><link rel="prefetch" href="/assets/js/709.213dd511.js"><link rel="prefetch" href="/assets/js/71.cb87ee06.js"><link rel="prefetch" href="/assets/js/710.04e53d3c.js"><link rel="prefetch" href="/assets/js/711.d33454ed.js"><link rel="prefetch" href="/assets/js/712.e1829993.js"><link rel="prefetch" href="/assets/js/713.647ede36.js"><link rel="prefetch" href="/assets/js/714.93c2bcf4.js"><link rel="prefetch" href="/assets/js/715.45a55407.js"><link rel="prefetch" href="/assets/js/716.c0fa336e.js"><link rel="prefetch" href="/assets/js/717.de1d7bc2.js"><link rel="prefetch" href="/assets/js/718.d5eef94c.js"><link rel="prefetch" href="/assets/js/719.20f6d941.js"><link rel="prefetch" href="/assets/js/72.41511541.js"><link rel="prefetch" href="/assets/js/720.e40fd9ef.js"><link rel="prefetch" href="/assets/js/721.87bdb1e4.js"><link rel="prefetch" href="/assets/js/722.c3d93dc2.js"><link rel="prefetch" href="/assets/js/723.3b4d6681.js"><link rel="prefetch" href="/assets/js/724.4592b597.js"><link rel="prefetch" href="/assets/js/725.970d2906.js"><link rel="prefetch" href="/assets/js/726.956a5380.js"><link rel="prefetch" href="/assets/js/727.234b55c4.js"><link rel="prefetch" href="/assets/js/728.e0e990aa.js"><link rel="prefetch" href="/assets/js/729.87698d82.js"><link rel="prefetch" href="/assets/js/73.71b0b8b6.js"><link rel="prefetch" href="/assets/js/730.9d3f2cce.js"><link rel="prefetch" href="/assets/js/731.1701d173.js"><link rel="prefetch" href="/assets/js/732.f476fa06.js"><link rel="prefetch" href="/assets/js/733.682e8a4a.js"><link rel="prefetch" href="/assets/js/734.054d0757.js"><link rel="prefetch" href="/assets/js/735.923c6811.js"><link rel="prefetch" href="/assets/js/736.e4e8e69e.js"><link rel="prefetch" href="/assets/js/737.598ece2d.js"><link rel="prefetch" href="/assets/js/738.49506824.js"><link rel="prefetch" href="/assets/js/739.af613ae2.js"><link rel="prefetch" href="/assets/js/74.96c2e803.js"><link rel="prefetch" href="/assets/js/740.c50b7dd6.js"><link rel="prefetch" href="/assets/js/741.13c376c5.js"><link rel="prefetch" href="/assets/js/742.f74c70e7.js"><link rel="prefetch" href="/assets/js/743.c553462d.js"><link rel="prefetch" href="/assets/js/744.0a31644e.js"><link rel="prefetch" href="/assets/js/745.9fd39f93.js"><link rel="prefetch" href="/assets/js/746.3d480f86.js"><link rel="prefetch" href="/assets/js/747.301fbc42.js"><link rel="prefetch" href="/assets/js/748.5221444e.js"><link rel="prefetch" href="/assets/js/749.16836e08.js"><link rel="prefetch" href="/assets/js/75.d19ad182.js"><link rel="prefetch" href="/assets/js/750.76fa653f.js"><link rel="prefetch" href="/assets/js/751.a2403232.js"><link rel="prefetch" href="/assets/js/752.5b2d9505.js"><link rel="prefetch" href="/assets/js/753.bc8bbb44.js"><link rel="prefetch" href="/assets/js/754.ff6f870d.js"><link rel="prefetch" href="/assets/js/755.b1f776e8.js"><link rel="prefetch" href="/assets/js/756.ec5fcce0.js"><link rel="prefetch" href="/assets/js/757.0055872d.js"><link rel="prefetch" href="/assets/js/758.5c0fd10e.js"><link rel="prefetch" href="/assets/js/759.2d235e0d.js"><link rel="prefetch" href="/assets/js/76.a2351808.js"><link rel="prefetch" href="/assets/js/760.f9fc4c1b.js"><link rel="prefetch" href="/assets/js/761.0a70b624.js"><link rel="prefetch" href="/assets/js/762.2aeb7fd6.js"><link rel="prefetch" href="/assets/js/763.22001c64.js"><link rel="prefetch" href="/assets/js/764.1a8fd1d8.js"><link rel="prefetch" href="/assets/js/765.a65913ba.js"><link rel="prefetch" href="/assets/js/766.003d110b.js"><link rel="prefetch" href="/assets/js/767.d347c3cc.js"><link rel="prefetch" href="/assets/js/768.128f6117.js"><link rel="prefetch" href="/assets/js/769.fa22ef04.js"><link rel="prefetch" href="/assets/js/77.422324bb.js"><link rel="prefetch" href="/assets/js/770.6a3fe201.js"><link rel="prefetch" href="/assets/js/771.52d6dab6.js"><link rel="prefetch" href="/assets/js/772.b735b408.js"><link rel="prefetch" href="/assets/js/773.9d062ecb.js"><link rel="prefetch" href="/assets/js/774.68849f06.js"><link rel="prefetch" href="/assets/js/775.c960f033.js"><link rel="prefetch" href="/assets/js/776.d0e4c5e9.js"><link rel="prefetch" href="/assets/js/777.753e7f97.js"><link rel="prefetch" href="/assets/js/778.4e74367d.js"><link rel="prefetch" href="/assets/js/779.5abac440.js"><link rel="prefetch" href="/assets/js/78.4d96759d.js"><link rel="prefetch" href="/assets/js/780.a526683b.js"><link rel="prefetch" href="/assets/js/781.b9c49cb4.js"><link rel="prefetch" href="/assets/js/782.e823a708.js"><link rel="prefetch" href="/assets/js/783.f1783fb1.js"><link rel="prefetch" href="/assets/js/784.c57b1210.js"><link rel="prefetch" href="/assets/js/785.ce4ab85c.js"><link rel="prefetch" href="/assets/js/786.36e7da3b.js"><link rel="prefetch" href="/assets/js/787.59a0ef5d.js"><link rel="prefetch" href="/assets/js/788.4dc67b31.js"><link rel="prefetch" href="/assets/js/789.1f4f9919.js"><link rel="prefetch" href="/assets/js/79.8067fc33.js"><link rel="prefetch" href="/assets/js/790.b267f59d.js"><link rel="prefetch" href="/assets/js/791.a1c22760.js"><link rel="prefetch" href="/assets/js/792.98b70060.js"><link rel="prefetch" href="/assets/js/793.9c96559e.js"><link rel="prefetch" href="/assets/js/794.e9783094.js"><link rel="prefetch" href="/assets/js/795.970ec310.js"><link rel="prefetch" href="/assets/js/796.9f2685c2.js"><link rel="prefetch" href="/assets/js/797.cef2c612.js"><link rel="prefetch" href="/assets/js/798.c1992bb9.js"><link rel="prefetch" href="/assets/js/799.b647bedf.js"><link rel="prefetch" href="/assets/js/8.df9a561a.js"><link rel="prefetch" href="/assets/js/80.ea647470.js"><link rel="prefetch" href="/assets/js/800.34ec2be2.js"><link rel="prefetch" href="/assets/js/801.5d83cc4c.js"><link rel="prefetch" href="/assets/js/802.05e6ef28.js"><link rel="prefetch" href="/assets/js/803.36272367.js"><link rel="prefetch" href="/assets/js/804.cfb52c2e.js"><link rel="prefetch" href="/assets/js/805.9876d872.js"><link rel="prefetch" href="/assets/js/806.48cf10e3.js"><link rel="prefetch" href="/assets/js/807.246e6cf1.js"><link rel="prefetch" href="/assets/js/808.d74a4f54.js"><link rel="prefetch" href="/assets/js/809.37010b50.js"><link rel="prefetch" href="/assets/js/81.e3ef90fb.js"><link rel="prefetch" href="/assets/js/810.1314907b.js"><link rel="prefetch" href="/assets/js/811.7d3f2755.js"><link rel="prefetch" href="/assets/js/812.de472c9d.js"><link rel="prefetch" href="/assets/js/82.f3100e87.js"><link rel="prefetch" href="/assets/js/83.33043dc5.js"><link rel="prefetch" href="/assets/js/84.0a73b211.js"><link rel="prefetch" href="/assets/js/85.ee7d12a2.js"><link rel="prefetch" href="/assets/js/86.97a2d485.js"><link rel="prefetch" href="/assets/js/87.dde5b100.js"><link rel="prefetch" href="/assets/js/88.f3c2cfc6.js"><link rel="prefetch" href="/assets/js/89.ce456eee.js"><link rel="prefetch" href="/assets/js/9.514b8513.js"><link rel="prefetch" href="/assets/js/90.aada372e.js"><link rel="prefetch" href="/assets/js/91.6c5d01dd.js"><link rel="prefetch" href="/assets/js/92.20cc29df.js"><link rel="prefetch" href="/assets/js/93.9227d544.js"><link rel="prefetch" href="/assets/js/94.ef4167ab.js"><link rel="prefetch" href="/assets/js/95.1c3d7277.js"><link rel="prefetch" href="/assets/js/96.50c7dfc7.js"><link rel="prefetch" href="/assets/js/97.ab1c3803.js"><link rel="prefetch" href="/assets/js/98.342e730b.js"><link rel="prefetch" href="/assets/js/99.3a6c31cc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a3df589e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">AJ</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/golang/go-new/" class="nav-link">golang</a></div><div class="nav-item"><a href="/content/op/" class="nav-link">devops</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">algorithm</a></div><div class="nav-item"><a href="/k8s/" class="nav-link router-link-active">k8s</a></div><div class="nav-item"><a href="/baguwen/" class="nav-link">八股文</a></div><div class="nav-item"><a href="/golang/go-block/" class="nav-link">区块链</a></div><div class="nav-item"><a href="/about.html" class="nav-link">关于我</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/golang/go-learning/" class="nav-link">go-learning</a></li><li class="dropdown-item"><!----> <a href="/post/flutter-guide/" class="nav-link">flutter</a></li><li class="dropdown-item"><!----> <a href="/sql/mysql/" class="nav-link">mysql</a></li><li class="dropdown-item"><!----> <a href="/python/" class="nav-link">python</a></li></ul></div></div> <a href="https://github.com/ChinaArJun" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/golang/go-new/" class="nav-link">golang</a></div><div class="nav-item"><a href="/content/op/" class="nav-link">devops</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">algorithm</a></div><div class="nav-item"><a href="/k8s/" class="nav-link router-link-active">k8s</a></div><div class="nav-item"><a href="/baguwen/" class="nav-link">八股文</a></div><div class="nav-item"><a href="/golang/go-block/" class="nav-link">区块链</a></div><div class="nav-item"><a href="/about.html" class="nav-link">关于我</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/golang/go-learning/" class="nav-link">go-learning</a></li><li class="dropdown-item"><!----> <a href="/post/flutter-guide/" class="nav-link">flutter</a></li><li class="dropdown-item"><!----> <a href="/sql/mysql/" class="nav-link">mysql</a></li><li class="dropdown-item"><!----> <a href="/python/" class="nav-link">python</a></li></ul></div></div> <a href="https://github.com/ChinaArJun" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav> <div></div> <div style="padding-left:1.5rem;"><div></div></div> <ul class="sidebar-links"><li><a href="/k8s/" aria-current="page" class="sidebar-link">目录</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>集群搭建</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/k8s/prepare.html" class="sidebar-link">预备工作</a></li><li><a href="/k8s/linux-command.html" class="sidebar-link">搭建过程中常用的 linux 命令</a></li><li><a href="/k8s/install-docker.html" class="sidebar-link">docker 安装与配置</a></li><li><a href="/k8s/install-kubeadm.html" class="sidebar-link">kubeadm 简介与安装</a></li><li><a href="/k8s/install-master-node.html" class="sidebar-link">搭建第一个 kubernetes 集群</a></li><li><a href="/k8s/install-worker-node.html" class="sidebar-link">为集群添加一个工作节点</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>部署你的第一个应用</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/k8s/k8s-network.html" class="sidebar-link">从外部访问Kubernetes Pod的几种方式</a></li><li><a href="/k8s/pod.html" class="sidebar-link">部署你的第一个应用: Pod，Deployment 与 Service</a></li><li><a href="/k8s/ingress.html" class="sidebar-link">在外网访问你的应用: Ingress</a></li><li><a href="/k8s/https.html" class="sidebar-link">为你的应用自动生成证书</a></li><li><a href="/k8s/" aria-current="page" class="sidebar-link">有状态应用: Stateful Application - TODO</a></li><li><a href="/k8s/" aria-current="page" class="sidebar-link">状态管理: PV 与 PVC - TODO</a></li><li><a href="/k8s/" aria-current="page" class="sidebar-link">使用 helm 部署 redis - TODO</a></li><li><a href="/k8s/" aria-current="page" class="sidebar-link">使用 helm 部署 postgres - TODO</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>kubernetes 与微服务</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/k8s/" aria-current="page" class="sidebar-link">服务质量: 资源分配，限额与抢占 - TODO</a></li><li><a href="/k8s/" aria-current="page" class="sidebar-link">服务发现与原理 - TODO</a></li><li><a href="/k8s/" aria-current="page" class="sidebar-link">负载均衡: 方案 - TODO</a></li><li><a href="/k8s/" aria-current="page" class="sidebar-link">负载均衡: iptables 与 IPVS - TODO</a></li><li><a href="/k8s/" aria-current="page" class="sidebar-link">链路追踪 - TODO</a></li><li><a href="/k8s/" aria-current="page" class="sidebar-link">熔断 - TODO</a></li><li><a href="/k8s/" aria-current="page" class="sidebar-link">限流 - TODO</a></li></ul></section></li></ul> </aside> <!----> <!----> <main class="page"><div class="theme-default-content" style="margin-bottom:-5rem;"><div class="bar"><div class="bar-intro"><div class="text">
      流逝的是岁月，不变的是情怀.
        </div> <div class="text">
      坚持学习，是为了成就更好的自己. <br></div> <div>公众号[中关村程序员]</div></div></div> <!----></div> <div class="theme-default-content content__default"><h1 id="_2小时躲坑k8s-大型分布式集群环境捷径部署"><a href="#_2小时躲坑k8s-大型分布式集群环境捷径部署" class="header-anchor">#</a> 2小时躲坑k8s-大型分布式集群环境捷径部署</h1> <h2 id="课程介绍"><a href="#课程介绍" class="header-anchor">#</a> 课程介绍</h2> <p>​	Kubernetes(k8s)一个用于<strong>容器</strong>集群的自动化部署、扩容以及运维的开源平台。通过Kubernetes,你可以<strong>快速有效地响应</strong>用户需求;快速而有预期地部署你的应用;极速地<strong>扩展</strong>你的应用;无缝<strong>对接新应用</strong>功能;节省资源，优化<strong>硬件资源</strong>的使用。为容器编排管理提供了完整的开源方案。</p> <p>Kubernetes解决了什么问题？</p> <ul><li>服务器环境</li> <li>服务器资源管理</li> <li>服务容灾恢复</li> <li>硬件资源利用</li> <li>服务资源创建</li> <li>可视化管理</li> <li>服务资源监控</li> <li>资源整合管理</li></ul> <p>Kubernetes在容器编排可谓是做到了淋漓尽致，解决了之前的种种痛点，但是学习成本也相对较高，需要结合一定的实践，踩一定的坑才能形成自己的理解。</p> <h3 id="目标"><a href="#目标" class="header-anchor">#</a> 目标</h3> <ul><li>了解什么是k8s，为什么世界需要它，k8s的工程师又为什么这么抢手。</li> <li>k8s企业环境部署捷径，多Master/node躲坑快速部署。</li> <li>基于Kubernetes集群管理,kubeadm，kubectl等常见指令使用。</li> <li>基于Kubernetes快速启动集群Web应用。</li></ul> <h1 id="一、kubernetes概述"><a href="#一、kubernetes概述" class="header-anchor">#</a> 一、Kubernetes概述</h1> <h2 id="_1、什么是k8s"><a href="#_1、什么是k8s" class="header-anchor">#</a> 1、什么是k8s</h2> <p>Kubernetes（K8s）是Google在2014年发布的一个开源项目。</p> <p>​	据说Google的数据中心里运行着20多亿个容器，而且Google十年多前就开始使用容器技术。</p> <p>​	最初，Google开发了一个叫Borg的系统（现在命名为Omega）来调度如此庞大数量的容器和工作负载。在积累了这么多年的经验后，Google决定重写这个容器管理系统，并将其贡献到开源社区，让全世界都能受益。</p> <p>​	这个项目就是Kubernetes。简单地讲，Kubernetes是Google Omega的开源版本。</p> <p>​	从2014年第一个版本发布以来，Kubernetes迅速获得开源社区的追捧，包括Red Hat、VMware、Canonical在内的很多有影响力的公司加入到开发和推广的阵营。目前Kubernetes已经成为发展最快、市场占有率最高的容器编排引擎产品。</p> <p><img src="data:image/png;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAA0JCgsKCA0LCgsODg0PEyAVExISEyccHhcgLikxMC4pLSwzOko+MzZGNywtQFdBRkxOUlNSMj5aYVpQYEpRUk//2wBDAQ4ODhMREyYVFSZPNS01T09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0//wAARCADdATEDASIAAhEBAxEB/8QAHAABAAICAwEAAAAAAAAAAAAAAAYHBAUBAgMI/8QAQxAAAQMDAgIHBAYIBQQDAAAAAQACAwQFEQYhEjEHE0FRYYGRInGhsRQyNrLB0RUWUlRicnOTIyQ1dOEzQkPwU6Lx/8QAGgEBAAMBAQEAAAAAAAAAAAAAAAIDBAUBBv/EACgRAQACAgEEAQMEAwAAAAAAAAABAgMRBBIhMUETBVFhFSIygRRx8f/aAAwDAQACEQMRAD8As5ERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERBwuVr7hdqG2tzUzgO7GDdx8lE7lq+rqMx0LPo8Z24ju4/gP/d1fi4uTL4jshbJWvlMK65UdvZxVVQ2PPJvMn3DmVh02pbVUyCNtTwOPLrAWj1OyrmSR8ry+R7nuJyS45J811XRr9Nr0957qZzzvtC3gQRkHmuyrC3XqvtpAglJjz/037t9OzywpbbdWUVVhlWPo0ne45afPs81jzcHJj7x3hZXLWfKRIurHte0OY4OaRkEHOV2WNaIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiDhOxYN1udPa6UzVBJJ2awc3HuChVz1PX13EyJ30aI7cMZ9ojxPP0wtGDi5M3jx90LZIr5TG43ygtwxPMHSf/Gzd3n3eaidy1XXVWWUv+WiPa05cR4ns8vVR8kkkkkk7klcLq4eDjx97d5Z7ZbT47OXOLnFziSSckk5JXCItqlyAXEAAkk4AAySV71dDVUJYKqB8ReMt4u3/AJ8FzbniK5Ush3DZWuPuBBUp144CGjZ2lzj6Y/NZ75rVy1pEdpWRWJrM/ZDURFpVs633autzgaaYhucmN27T5fkpXbdXUs+I65vUScuIZLSfmPj71BkWbNxceXvMd/vCyuS1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CIGtvYA2yY3/AHiPxVjaCgvFPYXR31koqOvc5plfxOLSAck5JznPNBU92IZrytc44AubyT3f4pKv9VRr3RlxkvM10tVM6oiqCHPjjGXMd2nHMgkZyO0rX25+vTPTxCK8dVE5vsvY5gIBGxJAyMDtKDx6UWubrOcu5OhjLfdjHzBWxtmnNa1dspqihvrxTSRtdE1tdIA1uNhgDAxyx2YwpdrnSX6x08dRSOayugBDeLYSN/ZJ7MHcH39+RXdPQa2sTnQUVNdIW5OWwMc9hPftkeaDaN6O9TSXBlVU1NNJJ1ge+R07nOJBzkkjJKn+rNM0+paBkUshimhcXRSgZ4c4yCO0HA9FDtHxaxl1LS1V2ZcHUjOISCpcWtGWkAhpIyc45BbTpCZqZ1dRTWFlWIoY3cTqZ+5cSNi0HJAAHZjdBB7np3UWkJPpjZHxxjb6TSyHHPkeR37iMKfdHeqKq/U9RS3Eh1TTYcJWgDjacjcDtB7R3+sHrHa7u1MaGsprpLC/GWPpi0HByMnA7RndTno80tU2GnqKm48LampDR1QOeraMncjtJPlhBNUREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREH//2Q==" alt="k8s2"></p> <p><img src="data:image/png;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAcFBQYFBAcGBQYIBwcIChELCgkJChUPEAwRGBUaGRgVGBcbHichGx0lHRcYIi4iJSgpKywrGiAvMy8qMicqKyr/2wBDAQcICAoJChQLCxQqHBgcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKir/wAARCADeAZADASIAAhEBAxEB/8QAHAABAAICAwEAAAAAAAAAAAAAAAYHAQUDBAgC/8QASRAAAQMDAQUCCQcKBQMFAAAAAQACAwQFEQYHEiExQVFhEyIycYGRobHRFCM2UnSywRUkNUJDVWJyc4IWMzRjlFST4RdTkqLS/8QAHAEBAAIDAQEBAAAAAAAAAAAAAAQFAQMGAgcI/8QANREAAgIBAgMFBwQBBAMAAAAAAAECAwQFERIhMQYTMkFRFCIzYXGBoRU0kbFCFiNS8GLB0f/aAAwDAQACEQMRAD8A9IoiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiKO6l1jQadi3ZT4arcMsp2HxvOewL3CuVkuGC3Z5lOMFvIkO8M4WpuGqrJa37lbcYWP+o07zvUFUN61heL65zZ6l1PTn9hAd1uO88ytG0Yz3+1X1Gizkt7ZbfQqrNR28CLfk2oWBmfB/KpcHm2HHvK+G7UrCT47Ktg7TD/5VRlYU/8ARcf1ZHeoWl40GutO3F7WQXKNsjuTJcsPtW/bI17Q5hDgeRByvN+Aei2lp1HdbJKHUNU8M6wv8ZjvR8FDu0RrnVL+TfXqL/zRfyKI6W13RX3dpardpK4j/LJ8WT+U/gpaDlc/bVOmXBNbMtYTjZHiiZREWs9hERAEREAREQBERAEREAREQBERAEREAREQBERAEREAREQAnCxvDChO1GpnpdPU76aeWF5qQN6N5aSN08OCqxt4uf7xrP8AkP8AitFlyg9mV2RnRonwNHokOBWVD9m88tRpCOSeWSV/hpBvSPLjz7SpeFti+JJk2ufeQUvUyiIvRsCIiAIiIAiIgCItVqO9x6fslRXy4cWDEbPrvPIL1GLnJRj1ZiUlFbs0WttZsscPyOgLX18gznmIR9Y9/YFUM00tTUPmne6SV53nvccklfVXVy19ZLVVLy+aZxc9x6lcttt9RdbjFRUTN+aU8B9Udp7l2+HiV4VXFLr5s5y6+d89l0OKCCWpnbDTxPllecNYxuSfQpraNmFxqgJbrUso4z+zYN9/p6D2qc6Z0vRadpAyJokqXD52dw8Zx7B2DuW+wqTL1iyb4aeS9fMn0YKS3nzZDYdmWn4x86Kqc45vmI92F9v2a6dc0iOGeLPMsnP45UwATCqva8jrxv8AkndxV/xKyuuyt7GOks9b4Qj9lUDGf7h8FBLhbqu1VRp7hA+CXo145jtB5EL0RgLX3ex0F8ojTXCESN5tcODmHtB6KxxtXure1vvL8kS7BhPnDkyj7FZay/XRlLQMO8MOfLyEQ+sT07uqviigfS0UUEkz53saGulk8p5HUrp2Kw0dgoW0tCzAHF7z5Uh7StrhRc/NeVYmlskbsXG7mPN8zCIiryYEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBZ6LCz0QED2sfRum+1N+6VUoVtbWPo3Tfam/dKqUKtyfGczqXxi49l/0Mj/rye9TNQzZf9DGf15Pepmp9fgRfYvwY/QIiL2SAiIgCIiAIiIDBOFUm1C8GrvsVujdmGkZvPb/uO+Dcesq23cl56vdWbhfq6qJJ8JO7BPYDgewK60alTyOJ/wCJXZ9jjBRXmdHgOKt/Z1p5tssjbhMz86rBvZI4tj/VH4qqrZSfL7tSUmP8+ZkZ8xPH2L0JG1scTY4xhrQAB2BT9cvcVGlPrzZH0+pOTm/I5MLKIuV2LkLOVhFkGcosIgCzlYRAERYcMhAZWCcLQam1bQaXpA6qcZKh/wDlwM8p/wAB3qpL5r6+XpxaKl1FB0ip3bvDvdzKjW5Ea/qWmHpl+Xzitl6svGe5UVLj5TVwxZ+u8N96+Ybvbqh+5BXU8juxsrT+K8253yTIS8k5JcckrLWgeSMeZRPb/kXi7NcudnP6HpwOBGQs5Xni1asvdke35HWyPib+xmcXs9qtjSOvqLUYFNO0UtwA4w5y1/e0/hzUqrJhZy6Mp83R8jEXH4o+qJeiLKlFOYwiw94Y0uccAcyoxdNUnfMNvAPQyu/AdVAzc+nChxWs3VUzue0ESZ0jWDLiAO0riNdSg4NTED3vCgE9RNUv3p5XvPe5cJaCeS5W3tXz/wBuvl8yzjpb296RZDJ45PIeHeYrkyq2jkkhdvRPcxw6tOFurdqeeFwZXfOx/XA8YKXidp6LZcN0eH+jTdp1kFvB7kvRcNPUx1MTZYXh7HDIIXMushOM4qUXumVjWz2YRFoNTatotNwgTnwtS8fNwMPjHvPYO9bYQlZJRgt2eJzjBbyN8ThdeS5UUJxNVwRHsfI1p9pVKXjV95vRcKiqdDCTwhgJa0ec8ytCGjeyRk9SeqvKtEtkt5y2K2WoxT5I9GQVdPUjepp45W9rHhw9i5l5xhllpnh9NI+F45OjcWn2Kbaf2i1lM00l5k8LCWEMqcePGccM9o7+YWu/Rrq1vB8R7r1CEvEti2EyqD/xPff3vWf94qYbNbvcbhfKxlfWz1LWUwLRK/ewd5acjS7cet2Sa2NlebCyaikbHax9G6b7U37pVShW1tX+jNN9qb90qpQuYyfGU+pfHLj2X/Qxn9eT3qZqGbL/AKGM/rye9TNT6/Ai+xfgx+gJwvgyNaMuOB2qF6v2h01gcaOga2qr+oPkxd57T3KqbnqG7XiYyXCumlaf2YO6wf2jgo9uVCt7HRYej5GUuN+7H5noB96tkTy2S4UzHDmHTNBHtXLDW01S0Opp45mnrG4O9y81FrXcwFyQVNRRyiWjnkgeP1onlp9ijfqC36Fo+zUtuVnP6HpgFZVR6Y2m1VLI2m1ATUU54CpaPHZ3uHUe1WtTVEdVTsnge2SJ4yx7TkOHap1V0bVvE57LwrsSfDYvv5HMiItxCOOc4geexp9y84nynfzH3r0i4ZaQV50rYfk1xqYDnMUz2ce5xXRaE/fmvkVGpdIm10Y0O1nbA4ZHhSf/AKlXoAqB09VNotSW+oecNZO3ePYCcH2FX60cQtWuJq+L+Rs01+4zkWCsrBVEWZgqgrvca9t7rgyvqmAVMgw2d4HlnvV+lU3ctC6iqLtWTRUIcySeRzXeFaMguJB596t9KnTCyTu2228yvzo2OK4CN/lS4/vGs/5D/is/lS4/vGs/5D/it1/gDUf/AELP+834p/gDUf8A0LP+834rovaMD1j/AAVXd5HozS/lS4/vGs/5D/in5UuP7xrP+Q/4rcnQOo2gk0TMDn8834qN9o7Fvq9ku37tJ7fJGufew8RNtm9zrJNWiGeqnmjkgflssrnAYwc8SrI1DfIbBZZ66fiWDDG/WceQVX7M2OdrNrgODKeTePZyXY2s3R096pbawnwUEXhnY6udwHsHtXG67KNFz4V5HU6DjvLnGD/6iE3G5VV3uElbXyGSaQ8c8mjsHcuKloqivq2U1FC+eaQ4axgySuLIwrs2f6Xjstjjq52D5dVNDpH44tb0aFydFUr5cz6RqGXHTqFwLn0SIvbNkVXJEH3S4MgLv2cLd4t85PBc9Zsge2Emgu2ZejZ4uB9I5epWjjgs4yrX2Sn0OOes5zfFxnnC8WausVZ8mukBikPkuHFrx2g9Vr2SSQyslge6ORhDmvacFp7QvQ2ptPU2oLNLSTt8fGY39WO6ELz5PDJTVMlPM3dkieWPHeDgqryKHS910Ou0vUY59bhYveXX5l4aE1SdRWXFS78+psMm/i7Hen35UszwVC6BurrVq+lwfm6s/J5B255H14V311UKKgmnOPEbkZ6norCq9Khzl5HI6phezZPDDo+aI5qS6unmdRwvIY3yyDzPYtAhJc4uccknJWxs1u/KNeGyZ8FH4zu/sC+YXW3anmber5fIsoxhi07+gt9lq7iwPjb4OLPlv6+btW4bpFmPGq357mhSJjGsaGsAa0DAA5BfYXcY/Z3DrglYuJlJZn3TfJ7IhNbp2ro4zIwioYOe6MEehangrKc3IUO1LbW0lS2pgbuslPjAcg5UOtaHDGrd+P0XVE7DzpSl3dh17JcnW6rDXHMD/Kb2HtU4Y/eaDzB4qtSMhTbTtSai0MDzl0RLD5hy9ik9mc+Ut8ab+aPGpURjtZH7jUl9h0/ZZK6Yb7gdyKPPlvPIKjKysqbjWS1ddKZZ5XbznH3DsA6KW7Trm6p1DFQRvzFSR7zgOW+7/wAY9ahntX2jSMVV1d7Lq/6OIzbXOzgXRHYoaGpuVYyloIXTzPPBreneewd6nNDsplfEHXK5iN5/UgjyB6Tz9SlGjdOssNljEjWmsmAfO/HEE/q+YKSNHBVmXq10puNL2SJdGDDh3s5srO4bKZo4i623FsrwM7k7N3e9I+CglfQ1NtrH0ldC6GZnNruveD1HevRJHBRTXenIr1YpJY4waykaZIX44kDiW+n3rOFqtsbFG57pmMjBhw8Va22KYU72T/p6v+yt++oE128Ae1T3ZP8Ap2v+zD76utV54kvsV+H8dG82sfRqm+1N+6VUoVtbWPo3Tfam/dKqUL5tk+M8al8d/YuTZh9DWf15PeuXX+pnafsvg6RwFbVZZFn9UdXej3ri2Y8NGM/rye9V1tBub7nrGrBPzdMRAwdw4n2krdba66U0dr2fxFlThGXRLdkYeXPldI8lznHLieZPatnY7BcdQ1ZgtsO9u435X8GM857e5dOjpJK+thpIBmWZ4Yzzkr0HY7LS2K1RUdFGGtaPGd1e7qT3lQMenvpNy6I7TVdR9hgoV+J/gg1Lsgi8CPl91kMnUQsAb7crV37ZXXUFO6otFWK1jBkwyN3X+g8j7FZt0v1sssJfc6yKn7nO4nzDmoHetrIO9HYqQP6Ceo4D0N+PqUy2vHhHnyOfxMvVL7FKtt/0VkQQcHgR7FYGzPVL6S4CyVr/AM3n/wBMSfIf9XzH3qCVNTLWVk1TPu+FmeXv3WhoJPcF8wmUVEbqUPdOx4dGIxl28DkYAVdVY657xOuzsdZOK4W8nt+T0yFldG01c1baaapqYXQTSxhz4njBY7qMLvK/T3R8wa2exh2SOCpfaHa3W7VksoafBVjRM09M8nD2Z9KuhRfXtgN7sDnU7N6rpcyRAc3fWb6R7QFY6dkez3qT6PkyFmVd7Vy6opborx0bexe9N08ziPDxjwUw/iHX0jiqO5jlhbzSupJtN3QTAGSnl8WeIdR2jvC6XVMR5NKcOq5oqcO/uZ7Poy9lgrrUNdT3GkjqqKZs0Mgy1zV2VxWzT2Z0Saa3QTkiIZCIvl7gxhcSABxJPRAafVtxFs0tXT5AeYzHH3udwHvVDAEDHYpjr7VbL5XtoqF5NHSuyXDlK/t8w6KJZGMldlpGPKilzn1Zz2barbNl5E82U0bn11wrMcGRtiB7ycn3D1qL6+eTrq4h36pYB/8AAK1dD2Y2bTEEczSKif56XPaeQ9Awqw2k0rqbXFS4g4nYyRp7eGD7lxmt3d/ZKa6bncdlI93covrsR6ijEtwpYjyknY057C4ZXpJgDGBoGABheaYZHQTRytA3o3B4z2jivR1srYrla6ashcHMnjDwR3hVuA1s0W3aVS465eXM7iIitDkjDu5UFryBsGuLk1oADntfgdpaCfar8c4NGT0XnnUlybd9S19azyJJSGHtaOAPsVdntd2kdJ2di3kykuiR0KF5iuNLI04LZ2OB8zgr91K7Fif/ABFo9qo2x0jq3UNvp2NyZKhnowc59ivfUEJlsswHNmHD0KA4v2G1L0JOuNe1VL/vUgylWkmA09Q/Hjb4Ge7CivRSPSdU1ks1M7gXYe3v7VxegyjHUI8RH1BN0PYlg5IiL6mcyFqNTNabLIXDOC3HccrbrQarqmxW9sGfGlcOHYBxVbqkoxwrHL0N+Om7YpepEchSjSTs09SOxw9yiylekoy2hmk+u/A9AXz/ALORbz016MvtS+AyqdWyGTWFzcTnE5b6uH4LrWOAVOobdA/yX1LAR2jOcexbHXNI6k1lXB3KZwlb5nD4grTUdS6jr6eqZzglbJ58HK/R1Xv4a4POP/o+Zz5X8/U9EFqyOAXDS1MVXSxVEDw+OVoexw6g8lzhcFzT2Z04Xy5ocCD1GF9Lq3CsZb6Coq5nBscMbnuJ7hlelu3sjD2S5nnyriEVZPE0YbHK5gHcCQptso/T1f8AZW/fUIfI6WR0jzlzyXHznipxsp/T1f8AZW/fXaaimsHZ/I53F/cI3W1j6N032pv3SqlCtrax9G6b7U37pVShfOMnxmvUv3D+xcmzH6GR/wBeT3qn7tKZr3XSOJJdUycT/MVcGzH6Fx45+Hk96qbUlGbfqe40zsjdqHkZ7Ccj3rzlfCgfR+yLW+3/AIjT1ygtOoKWvqo3SRwOLi1vMnBx7Vv71tOvFzL4qDdt0B5GPjIf7uQ9AUNUhsuhr5eyx8VN8np3cRNUeKCO4cyotU7duCB1uZRhqayMnbdev/zzNBPJLUzOlqJHyyOOS+R2SfSuxbLTcLtOIrbRy1BPAuY3xR53cgrYs2yyz0JbJc3PuE3UO8WMf2jn6VNIKaGlhEVNEyKNvJrGgAKTDCcnvNlHkdoa61wY0d/6Kws2ySeUNkvtY1jefgafifMXH8FP7Rpm1WRmLfRRxP6yYy8+dx4rbBZU2uiFfhRzeTqGTk/Ely9PIAYCyiLeQjCw4ZCyiyCrdfaOfTSyXm2R70DzvTxNHFjurh3dqgAweIXo9zGvaWuALTzBVdaq2ciSZ9bp8BpOXPpDwBP8B6eZdHpupqCVV32ZU5WG23OBDLFqW5adqC+hkDoncX08nkP+B71ZVn2kWa4Mayue6gnPNsvknzOHD1qo54JqWd0NVFJDK3yo5BghcZCtcjTqMtca5P1RCqybKXt5HoeC4UdSM09VDKO1kgPuXJJUwRNJkmYwDqXALzoBjksHjz5Ks/Qnv4/wS3qWy8Jd901zYLY0h9c2eQfs6fxz8FXGpdd19/Y6mgBpKJ3AxtPjP/mP4BRbA5BOoA4knAA6lTsbSqKHxS95/Mi251tq2jyAbgKYaE0o+8VrbhWR/mEDstDv2zx+A/8AC5NL7PKq6uZU3lr6Wj5+CPCSXuI6D2q2KemipaeOCnjbHFGA1rGjAaFD1HUoqLppfPzZJxMRt8dhzKv9qdiNbao7rTxl0tFwkDRxMZ5+o8fWrAXxJE2VjmSNDmuGCD1C5OyHHFxZ0ONfLHtjbHqjzOCCpnoPW4sJNuuZJoXuJjeBkxE8/wC33L51roaaxzy19uY6S3OJc4DiYM9D3dh6KGAg8QqX38aR9EaxtVx+vX+Uz0pS11NWQtlpZ45o3DIcx2QVyyTRxML5HBrQMlxPALzbT1dTRu3qSolgPbG8t9y+qq411YMVdZPMMY3XyEj1KYs/l0OffZuzi5T5Fja52gQyUslssUvhHSZZNUt8lo6hp6nvVXgnkUI4YW+0ppOs1PW7sbXRUbD87UEcB3N7Soc5WX2ci/oox9Lx22/q/UkmyqxuqbpLeJ2nwNMPBwno555n0D3q2HsD2lrhkEYK69ut1NarfDRUMfg4IWhrW/FdzdCuK6VCvgZwOdlSyr3b/H0K6r6R1FWyQO5NPintHRfEE8lLOyaF269hyFNLzZ2XGnyzDZ2eQ7t7ioZNDJTzOinYWPbzBXzLVNPu0+/vIeHfdMuMXIhfXwy6kytd6p69jWl4jm6xuOM+btW13h2qsnDxgevQrmbV1LRhtTMB2b5VvjdqnGtK6G7+REt0zeW8HyJ3X3OmoYC+eTBHJo5n0KD3KvluVY6aXg3kxvYOxcB8Z284kuPMk5KNjc94axpc48gBxVRqWsX6h7iW0fReZKxsSNHvN8zEcbppWxxjL3nDR3qwLfSNoqCOBoHit446nqtVYbGaQiqqv84jxWfUHxUgA4Lqez+mPFg7rPFL8Irc/J72XDHoiv8AafZH1FDBdoGEupvEmwP1DyPoPvVYhei5omTQujkY17Hgtc1wyCD0VNau0ZLp+d1RRMfLb3uyCBkw9zu7vX1DSM6Kj3Fn2OUzcdt95A2Wh9bR2qMWy8SFtKD8zPjPg8/qu/h7D0VoQVUNRE2SCRssbhlr2HIPpC878+K+4auro/8AR1U1P/SkLc+pSMvR43T463tua6M6VceGa3PRE1RFTxOlnkbExvNzyAAqq11rNt2H5Otbs0YOZZcY8KRyA/h696hs9bV1f+sqp6joPCyF2PWvmnpZqudsFLE6WR2SGt54HElMTSIUS7y6W+xi/NlbHhitjjU72Ufp6v8AsrfvqB5U82Ufp6v+yt++peq/tJfY0Yfxkbvax9G6b7U37pVShW1tY+jdN9qb90qpV81yfGeNS/cP7FybMfoZH/Xk96jO1exGKvhvULfElaIpiOjh5JPn5epSfZj9DI/68nvUmuFBBcqGWkq2CSGZpa9p7FIdasqUfkdbpGU8R12ry/o824HYrN0FryBlNHZ71MI3sw2CeQ8HDo0noQojqnSVbpmrdvNdLRE/N1GOHmd2H3qPluSquEpUT5n0a6rH1TG5P6P0PTLHNewOaQQeRBXHUVVPSQulqpmQxtGS57sAD0rzlT3KvpBu01dUwjsjlIHqXzUVlXWu3qyqnqD/ALshd7+Sl+3Lboc9/puzi5zWxOda7QX3JwobBO+Oma4OfVRuLXSEcg3u7+q7ml9qBY5lHqQDd5NrGD74/EKtBwU20Roaa9Tx3C5xPioGnLWOG66Y/wD59601W3WWbxLHLwMDGxOGxdPPz3LkhmZNE2SJwexwy1zTkELkXxHG2JgYwbrWjAA5AL7VwjhWYREWTAREQGuuljt94j8HcKSOcAcCR4zfMRxCiFdsppJXb1vrpaf/AG5QJB6+BVgIpNOVdT8OTRpnRXZzkippdld5YfmqqjkHnc38F8M2WX1xG9U0TB/M4/grcRTP1fL28X4NPsVPoVtR7J3bwNwueW9WQR/ifgpVZ9GWeyua+lpGumb+3l8d/rPL0LfrIUW3MyLuU5M2QxqodEfOOKL6KwohJ3CIiGDDmhzS1wBB6HqobfNmVmusjpqPet8x5mEZaT/Kfwwpmi8TrjNbSRupvtolxVy2ZUNTsku8ZxS11LM3PAvyw49q4otk99e7EtXRRNzzy5x9yuNFH9jp9C0WuZqW3F+CAWrZRbaYskudRJXPbxLPIYT5uo9KnEFLFSwMgpomRRMGGsYMADzLnWVvhXGvlFFdflXZD3tk2fOFlEWwjNjmurV2+nrmblTG146HqF2gi8WVwsi4zW6ZlNp7ojFRpE7+aWo8X6sg5ekLqHStwB4PhI7clTJFRW9nsCyW/Dt9CZHOvj5kUg0lM535zUtDexjeK3lvs9Jbh8xH42OL3cSfSu+il4uk4mK+KuHM12ZNtvKTGEwiz0VpsRjGF8Pja9jmPAc1wwQeOR2LV33U1Bp6Fkle9+ZMiNjGZLsc+4elV9dtqFwqnFlphZRx/wDuP8d5/Ae1TMfCvyOda5epHsyKq3tJkivGzW2V8jpbe91BK7iWtG8w/wBvT0KNTbLL012IKujlHa4ub+CsPTl/p9Q2iKsgLQ/G7LHnjG/qD+Hctut0M/Lx3wcXT1NUsai33kiraPZTXPcPl9fBEzr4Fpc724Cl9Fpm16YtFWaKLx/AuMk8hy9w3T16DuCkaim0K9stempadj8VNYPBsHXH6x9XD0p7Vk5lirk9930MdzVRBySKYHIeZT/ZNGTd7jJg4EDG587ifwUB8ytPZVRGKzVda5v+om3Wnta0fEldFqsuDEafnsVWEt70SXUmm4NT0EdJUzywtZIJA6LGcgEY4+dRr/0jtv7yrPUz4KfDmvpcRKuEnu0Xk8aqb4pR3ZqdPWKLTtpbQU8skrA9z96TGcnzLaoiyltyRtilFbI4p6aKphdDURslieMOY8ZBHeFBbzspt1XK6W0zuoXO/Z432Z7geI9an6LxOuM/EiVRk3Y8uKqTRTc2ya/NdiGqopB2lzm/guSl2SXmR353W0cIzzZvPP4K4EWh4lT8iz/Xc7bbi/BDLJszs1pmE9TvV8w5GYDdHmb8cqZNaGtAAwByA6LKKTCEYLaKKq6+2+XFZLdmVgrKwV7NIREWQEREAREQBERAFkLCIDJWERAEREAREQBERAERE2MhERDAREWTIREQBERAEREBodW6fbqCySUzcNnZ48DzyDuw9x5KkJqeWkqHwVMbopo3Fr2OGCCvRqjGq9GUmoW+HjIp65ow2YDIcOxw7Fb6bqHszcJ+F/gr8rF71cS6lR2m811irflNum3HEYe0jLXjsIU8o9q0YgArbW/wvUwyAtPr5KFXbTd3s0hbXUb9zpLGN5h9I/FasEA8SFfzxcPM9/r9CqhbdjvZFiV+1dxiLbfbN15HB00nAegc/WoBcrlWXatdV3Cd00zuGTyA7AOgXHwdwBBPYtxaNH3i9uaaaldDCSMzTgsbjuzxPoXqunDwk5rl9Q7Lr+T5mttdtqLvcYqKjYXSyn0NHVx8yv2026G1WunoaYYjgYGDv7Se881q9MaUo9NUpbD87Uyf5s7hxd3DsHct+BgLm9Sz/arNo+FdC2xcbulvLqzIWURVRNCwVlYKAIiIZCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIsmQiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAhAKIgPncXTms1tnOZqCmee10Tfgu8iym0+TPLin1R0qe1UFM7egoqeI9CyJoPuXcDeKyiw231GyXQxhZwiyFgyEREMBYKysFDIREQBERAEREAREQBERAEREAREQBERAEREAREWTIREQBERAEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBERYMBERAEREAREQBERAERFkyEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBERAEREB//Z" alt="k8s3"></p> <h2 id="_2、kubernetes解决了什么问题"><a href="#_2、kubernetes解决了什么问题" class="header-anchor">#</a> 2、Kubernetes解决了什么问题</h2> <ul><li>通过 Kubernetes，分布式系统工具将拥有网络效应。每当人们为 Kubernetes 制作出的新的工具，都会让所有其他工具更完善。因此，这进一步巩固了 Kubernetes 的标准地位。</li> <li>云提供商并非可替换的商品。不同的云提供的服务会变得越来越独特和不同。如果可以访问不同的云提供商提供的不同服务，那么企业将因此受益。</li> <li>当多节点应用与单节点应用一样可靠时，我们将看到定价模型的变化。</li> <li>这就是为什么我会被 Kubernetes 洗脑的原因，它是跨越异构系统的一个标准层。</li> <li>将来，我们会像讨论编译器和操作系统内核一样讨论 Kubernetes。 Kubernetes 将会是低层级的管路系统，而不在普通应用开发人员的视野之内。</li></ul> <p>Kubernetes 已成为部署分布式应用的标准方式。在不远的将来，任何新成立的互联网公司都将用到 Kubernetes，无论其是否意识到这点。许多旧应用也正在迁移到 Kubernetes。</p> <h4 id="_2-1-起因：docker"><a href="#_2-1-起因：docker" class="header-anchor">#</a> 2.1 起因：Docker</h4> <p><img src="/assets/img/k8s5.04fd19e3.png" alt="image-20190620115317209"></p> <h4 id="单一稳定的一体化模型"><a href="#单一稳定的一体化模型" class="header-anchor">#</a> 单一稳定的一体化模型</h4> <p><img src="/assets/img/k8s6.f684d73f.png" alt="img"></p> <h4 id="微型化的应用部署模型"><a href="#微型化的应用部署模型" class="header-anchor">#</a> 微型化的应用部署模型</h4> <p>(微服务、分布式、集群、高可用、负载均衡...)</p> <p><img src="/assets/img/k8s7.ac8b7519.png" alt="img"></p> <h4 id="_2-2-容器编排？是需要标准的？"><a href="#_2-2-容器编排？是需要标准的？" class="header-anchor">#</a> 2.2 容器编排？是需要标准的？</h4> <p>如此多的docker该如何管理(通信、负载均衡、资源共享管理、容灾、监控、健康检查….)？</p> <ul><li>Mesos</li></ul> <p><img src="data:image/png;base64,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" alt="img"></p> <ul><li>docker swarm</li></ul> <p><img src="/assets/img/k8s9.6aa5714c.png" alt="img"></p> <ul><li>kubernetes</li></ul> <p><img src="/assets/img/k8s10.b115387d.png" alt="image-20190620135040659"></p> <p>自2016年中，k8s表现出明显优势。</p> <p><img src="/assets/img/k8s11.dcbf8b8c.png" alt="image-20190620143819102"></p> <h3 id="_3-kubernetes工程师价值"><a href="#_3-kubernetes工程师价值" class="header-anchor">#</a> 3. kubernetes工程师价值</h3> <p><img src="/assets/img/k8s4.97c31b8f.png" alt="image-20190620114057180"></p> <h1 id="二、环境"><a href="#二、环境" class="header-anchor">#</a> 二、环境</h1> <h2 id="_2-1-部署软件环境版本"><a href="#_2-1-部署软件环境版本" class="header-anchor">#</a> 2.1 部署软件环境版本</h2> <p>操作系统: <code>Ubuntu 18.10</code>(本教程采用server版本)</p> <p>Docker： <code>docker-ce 18.06</code></p> <p>Kubernetes: <code>k8s 1.13.1</code></p> <h2 id="_2-2-ubuntu搭建研发环境"><a href="#_2-2-ubuntu搭建研发环境" class="header-anchor">#</a> 2.2 Ubuntu搭建研发环境</h2> <p>我们直接下载Unbuntu18.10-server版本，server版本的好处是没有Desktop,可以节省资源。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">wget</span> http://mirrors.aliyun.com/ubuntu-releases/18.10/ubuntu-18.10-live-server-amd64.iso
</code></pre></div><blockquote><p>注:也可以从配套资料中获取</p></blockquote> <h2 id="_2-3-ubuntu安装过程"><a href="#_2-3-ubuntu安装过程" class="header-anchor">#</a> 2.3 Ubuntu安装过程</h2> <h3 id="_2-3-1-创建虚拟机"><a href="#_2-3-1-创建虚拟机" class="header-anchor">#</a> 2.3.1 创建虚拟机</h3> <p>在VMWare 中启动安装虚拟过程</p> <ol><li><p>创建新的虚拟机，选择推荐版本的iso文件</p> <p><img src="/assets/img/ubuntu1.c10ccf95.jpg" alt="ubuntu1"></p></li> <li><p>选择自定义安装</p></li> <li><p>为此虚拟机选择操作系统 <code>Linux Ubuntu 64位</code></p></li> <li><p>指定引导固件<code>UEFI</code> 不要选择<code>BIOS</code></p> <p><img src="/assets/img/ubuntu2.4888586c.jpg" alt="ubuntu2"></p></li> <li><p>命名为<strong>Master</strong></p></li> <li><p>自定设置 存储为<strong>UbuntuMaster</strong> <strong>2CPU  2048MB 20GB硬盘</strong></p> <p><img src="/assets/img/ubuntu3.18930fd5.jpg" alt="ubuntu3"></p> <p><img src="/assets/img/ubuntu4.c1a84fa4.jpg" alt="ubuntu4"></p></li> <li><p>建议移除声卡和摄像头</p></li></ol> <h3 id="_2-3-2-图形界面安装方式"><a href="#_2-3-2-图形界面安装方式" class="header-anchor">#</a> 2.3.2 图形界面安装方式</h3> <ol><li><p>选择英文语言</p></li> <li><p>英文键盘</p></li> <li><p>设置国内镜像源头 <code>http://mirrors.aliyun.com/ubuntu/</code> 注意末尾的斜线</p></li> <li><p>设置您的用户名和密码，下文使用<em>YOUR_USERNAME</em> <em>YOUR_PASSWORD</em></p></li> <li><p><strong>切勿选择</strong> <code>microk8s snap</code> <code>stable: v1.14.2</code> 空格选中</p></li></ol> <p><img src="/assets/img/ubuntu5.90f54fd2.jpg" alt="ubuntu5"></p> <ol start="6"><li>Tab键切换到<em>DONE</em>回车，开始安装过程</li></ol> <p><img src="/assets/img/ubuntu6.2ecc47eb.jpg" alt="ubuntu6"></p> <ol start="7"><li><p>安装结束后点击重启<em>Reboot Now</em></p> <p><img src="/assets/img/ubuntu7.549a17e6.jpg" alt="ubuntu7"></p></li></ol> <h3 id="修改root密码"><a href="#修改root密码" class="header-anchor">#</a> 修改root密码</h3> <ol><li>安装过程中，输入用户名 <code>YOUR_USERNAME</code> 密码: <code>YOUR_PASSWORD</code></li> <li>重新启动后登录 用户名 <code>YOUR_USERNAME</code> 密码: <code>YOUR_PASSWORD</code></li> <li>确认登录成功后输入<code>sudo passwd</code> 输入上面的<code>YOUR_PASSWORD</code>,然后输入root用户的密码<code>root</code></li></ol> <div class="language- extra-class"><pre class="language-text"><code>设置root用户的密码root，是为了教学过程中简单。
但是在生产环境下禁止使用弱强度的密码。
</code></pre></div><p><img src="/assets/img/ubuntu8.74cd3169.jpg" alt="ubuntu8"></p> <ol start="4"><li>执行<code>exit</code>退出当前登录用户，然后使用root用户重新登录</li> <li>输入<code>shutdown now</code>停机</li></ol> <h2 id="_2-4-修改主机名"><a href="#_2-4-修改主机名" class="header-anchor">#</a> 2.4 修改主机名</h2> <p>修改主机名称</p> <ol><li>使用root用户登录</li> <li>打开配置文件<code>vim /etc/cloud/cloud.cfg</code></li> <li>修改配置<code>preserve_hostname: true</code></li></ol> <p><img src="/assets/img/ubuntu9.544e3cfc.jpg" alt="ubuntu9"></p> <ol start="3"><li>重启</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">shutdown</span> -r now
</code></pre></div><h2 id=""><a href="#" class="header-anchor">#</a></h2> <h2 id="_2-5-配置静态ip-永久有效-nat模式"><a href="#_2-5-配置静态ip-永久有效-nat模式" class="header-anchor">#</a> 2.5 配置静态IP(永久有效)(NAT模式)</h2> <ol><li>使用root用户登录Linux，如下以Node2为例</li> <li><code>vim /etc/netplan/50-cloud-init.yaml</code></li> <li>参考如下截图修改配置文件</li></ol> <ul><li>UbuntuMaster <code>172.16.235.146</code></li> <li>UbuntuNode1 <code>172.16.235.147</code></li> <li>UbuntuNode2 <code>172.16.235.148</code></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>network:
    ethernets:
        ens33:
            addresses: <span class="token punctuation">[</span><span class="token number">192.168</span>.236.177/24<span class="token punctuation">]</span>
            dhcp4: <span class="token boolean">false</span>
            gateway4: <span class="token number">192.168</span>.236.2
            nameservers:
                       addresses: <span class="token punctuation">[</span><span class="token number">192.168</span>.236.2<span class="token punctuation">]</span>
            optional: <span class="token boolean">true</span>
    version: <span class="token number">2</span>              
</code></pre></div><p>或者动态获取</p> <p><img src="/assets/img/ubuntu10.456d2102.png" alt="image-20190617115306138"></p> <h2 id="_2-6-修改hosts"><a href="#_2-6-修改hosts" class="header-anchor">#</a> 2.6 修改hosts</h2> <p>使用root用户登录</p> <ol><li><p>打开hosts文件 <code>vim /etc/hosts</code></p></li> <li><p>输入如下内容</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">192.168</span>.236.177 master
</code></pre></div><p>这个ip是当前桥接或者NAT分配的IP地址</p></li> <li><p>重启机器<code>shutdown -r now</code></p></li></ol> <h2 id="ip应用启动："><a href="#ip应用启动：" class="header-anchor">#</a> ip应用启动：</h2> <p><code>$netplan apply</code></p> <h1 id="三、docker-ce安装及配置"><a href="#三、docker-ce安装及配置" class="header-anchor">#</a> 三、Docker-CE安装及配置</h1> <h2 id="_3-1-docker简介"><a href="#_3-1-docker简介" class="header-anchor">#</a> 3.1 Docker简介</h2> <h3 id="_3-1-1-docker介绍"><a href="#_3-1-1-docker介绍" class="header-anchor">#</a> 3. 1.1 docker介绍</h3> <ul><li><p>docker是什么 ?</p> <blockquote><p>Docker 是一个开源的应用<strong>容器引擎</strong>，是直接运行在宿主操作系统之上的一个容器，使用沙箱机制完全虚拟出一个完整的操作，容器之间不会有任何接口，从而让容器与宿主机之间、容器与容器之间隔离的更加彻底。每个容器会有自己的权限管理，独立的网络与存储栈，及自己的资源管理能，使同一台宿主机上可以友好的共存多个容器。</p></blockquote></li> <li><p>docker与虚拟机对比</p> <blockquote><p><font color="red"><strong>如果物理机是一幢住宅楼，虚拟机就是大楼中的一个个套间，而容器技术就是套间里的一个个隔断。</strong></font></p></blockquote> <ul><li><p>虚拟化技术不同</p> <blockquote><ul><li>VMware Workstation、VirtualBoX</li></ul> <p>硬件辅助虚拟化：（Hardware-assisted Virtualization）是指通过硬件辅助支持模拟运行环境，使客户机操作系统可以独立运行，实现完全虚拟化的功能。</p> <ul><li>Docker</li></ul> <p>操作系统层虚拟化：（OS-level virtualization）这种技术将操作系统内核虚拟化，可以允许使用者空间软件实例被分割成几个独立的单元，在内核中运行，而不是只有一个单一实例运行。这个软件实例，也被称为是一个容器（containers）、虚拟引擎（Virtualization engine）、虚拟专用服务器（virtual private servers）。每个容器的进程是独立的，对于使用者来说，就像是在使用自己的专用服务器。</p> <p><font color="red">以上两种虚拟化技术都属于软件虚拟化，在现有的物理平台上实现对物理平台访问的截获和模拟。在软件虚拟化技术中，有些技术不需要硬件支持；而有些软件虚拟化技术，则依赖硬件支持。</font></p></blockquote></li> <li><p>应用场景不同</p> <blockquote><ul><li>虚拟机更擅长于彻底隔离整个运行环境。如: 云服务提供商通常采用虚拟机技术隔离不同的用户。</li> <li>Docker通常用于隔离不同的应用，例如前端，后端以及数据库。</li></ul></blockquote></li> <li><p>资源的使用率不同</p> <blockquote><p>虚拟机启动需要数分钟，而Docker容器可以在数毫秒内启动。由于没有臃肿的从操作系统，Docker可以节省大量的磁盘空间以及其他系统资源。</p></blockquote></li></ul></li> <li><p>docker的版本</p> <ul><li>Docker-CE -&gt; 社区版
<ul><li>Stable 版
<ul><li>稳定版, 一个季度更新一次</li></ul></li> <li>Edge 版
<ul><li>一个月更新一般</li></ul></li></ul></li> <li>Docker-EE
<ul><li>企业版</li> <li>收费的</li></ul></li></ul></li></ul> <p><img src="/assets/img/docker1.05be8038.png" alt="docker1"></p> <h2 id="_3-2-配置国内源"><a href="#_3-2-配置国内源" class="header-anchor">#</a> 3.2 配置国内源</h2> <h3 id="_3-2-1-基础准备"><a href="#_3-2-1-基础准备" class="header-anchor">#</a> 3.2.1 基础准备</h3> <ol><li>Docker 要求 Ubuntu 系统的内核版本高于 3.10 ，查看本页面的前提条件来验证你的 Ubuntu 版本是否支持 Docker。</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">uname</span> -r 
<span class="token number">4.18</span>.0-21-generic<span class="token punctuation">(</span>主版本必须保持一致<span class="token punctuation">)</span>
</code></pre></div><ol start="2"><li>安装<code>curl</code></li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">apt-get</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">apt-get</span> <span class="token function">install</span> -y <span class="token function">curl</span> telnet <span class="token function">wget</span> <span class="token function">man</span> <span class="token punctuation">\</span>
apt-transport-https <span class="token punctuation">\</span>
ca-certificates <span class="token punctuation">\</span>
software-properties-common <span class="token function">vim</span> 

</code></pre></div><ol start="3"><li><p>查看新版本号</p> <ul><li>Ubuntu 18.10</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>$ lsb_release -c
Codename:	cosmic
</code></pre></div></li> <li><p>查看确认国内源</p> <div class="language-shell extra-class"><pre class="language-shell"><code>	$ <span class="token function">cp</span> /etc/apt/sources.list /etc/apt/sources.list.bak
	$ <span class="token function">cat</span> /etc/apt/sources.list
</code></pre></div></li></ol> <h3 id="_3-2-2-在线安装docker-ce-本教程不推荐"><a href="#_3-2-2-在线安装docker-ce-本教程不推荐" class="header-anchor">#</a> 3.2.2 在线安装Docker-ce(本教程不推荐)</h3> <blockquote><p>(建议下面的手动安装方式，因为在线可能会出现版本不一致)</p></blockquote> <p>注意： <strong>该国内源目前提供 <code>18.09</code>版本，与k8s不符。k8s推荐安装<code>Docker ce 18.06</code></strong></p> <ol><li><p>安装GPG秘钥和添加国内镜像</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">curl</span> -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> apt-key <span class="token function">add</span> -
</code></pre></div><p>添加国内源头</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ add-apt-repository <span class="token punctuation">\</span>
    <span class="token string">&quot;deb https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu \
    <span class="token variable"><span class="token variable">$(</span>lsb_release -cs<span class="token variable">)</span></span> \
    stable&quot;</span>
</code></pre></div></li></ol> <p><img src="/assets/img/docker2.e1e0f6da.jpg" alt="docker2"></p> <ol start="2"><li>更新国内源路径</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">apt</span> update
</code></pre></div><p>3.安装查看版本指令</p> <div class="language- extra-class"><pre class="language-text"><code>apt-get install -y apt-show-versions
</code></pre></div><p>4.查看docker-ce版本号</p> <div class="language- extra-class"><pre class="language-text"><code>apt-show-versions -a docker-ce
</code></pre></div><ol start="5"><li>在线安装<code>Docker-ce</code></li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>   <span class="token function">sudo</span> <span class="token function">apt-get</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">apt-get</span> <span class="token function">install</span> -y docker-ce
</code></pre></div><div class="language- extra-class"><pre><code>注意到当前安装的版本是 `docker-ce_5%3a18.09.6~3-0~ubuntu-cosmic_amd64.deb`
</code></pre></div><h3 id="_3-2-3-手动安装docker-离线安装"><a href="#_3-2-3-手动安装docker-离线安装" class="header-anchor">#</a> 3.2.3 手动安装Docker(离线安装)</h3> <ol><li>下载<code>docker-ce_18.06.1\~ce\~3-0\~ubuntu_amd64.deb</code></li> <li>上传到上述文件到待安装服务器<code>master</code></li> <li>登录待安装服务器，切换到root账户</li> <li><code>dpkg -i docker-ce_18.06.1\~ce\~3-0\~ubuntu_amd64.deb</code></li></ol> <blockquote><p>如果提示错误</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>dpkg: error: dpkg frontend is locked by another process
</code></pre></div><p>说明已经有其他进程在使用dpkg安装程序</p> <div class="language- extra-class"><pre class="language-text"><code>sudo rm /var/lib/dpkg/lock
</code></pre></div><p>即可。</p> <blockquote><p>如果提示错误</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@master:~/package$ <span class="token function">sudo</span> dpkg -i docker-ce_18.06.1~ce~3-0~ubuntu_amd64.deb
 
<span class="token punctuation">[</span>sudo<span class="token punctuation">]</span> password <span class="token keyword">for</span> itcast: 
Selecting previously unselected package docker-ce.
<span class="token punctuation">(</span>Reading database <span class="token punctuation">..</span>. <span class="token number">100647</span> files and directories currently installed.<span class="token punctuation">)</span>
Preparing to unpack docker-ce_18.06.1~ce~3-0~ubuntu_amd64.deb <span class="token punctuation">..</span>.
Unpacking docker-ce <span class="token punctuation">(</span><span class="token number">18.06</span>.1~ce~3-0~ubuntu<span class="token punctuation">)</span> <span class="token punctuation">..</span>.
dpkg: dependency problems prevent configuration of docker-ce:
 docker-ce depends on libltdl7 <span class="token punctuation">(</span><span class="token operator">&gt;</span><span class="token operator">=</span> <span class="token number">2.4</span>.6<span class="token punctuation">)</span><span class="token punctuation">;</span> however:
  Package libltdl7 is not installed.

dpkg: error processing package docker-ce <span class="token punctuation">(</span>--install<span class="token punctuation">)</span>:
 dependency problems - leaving unconfigured
Processing triggers <span class="token keyword">for</span> man-db <span class="token punctuation">(</span><span class="token number">2.8</span>.4-2<span class="token punctuation">)</span> <span class="token punctuation">..</span>.
Processing triggers <span class="token keyword">for</span> systemd <span class="token punctuation">(</span><span class="token number">239</span>-7ubuntu10<span class="token punctuation">)</span> <span class="token punctuation">..</span>.
Errors were encountered <span class="token keyword">while</span> processing:
 docker-ce
</code></pre></div><p>表示当前docker-ce 依赖系统libltd17库，安装就可以了</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">apt-get</span> <span class="token function">install</span> -y libltdl7
</code></pre></div><ol start="5"><li>docker version</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>Client:
 Version:           <span class="token number">18.06</span>.1-ce
 API version:       <span class="token number">1.38</span>
 Go version:        go1.10.3
 Git commit:        e68fc7a
 Built:             Tue Aug <span class="token number">21</span> <span class="token number">17</span>:24:56 <span class="token number">2018</span>
 OS/Arch:           linux/amd64
 Experimental:      <span class="token boolean">false</span>

Server:
 Engine:
  Version:          <span class="token number">18.06</span>.1-ce
  API version:      <span class="token number">1.38</span> <span class="token punctuation">(</span>minimum version <span class="token number">1.12</span><span class="token punctuation">)</span>
  Go version:       go1.10.3
  Git commit:       e68fc7a
  Built:            Tue Aug <span class="token number">21</span> <span class="token number">17</span>:23:21 <span class="token number">2018</span>
  OS/Arch:          linux/amd64
  Experimental:     <span class="token boolean">false</span>
</code></pre></div><p>确保版本号是 <code>18.06</code></p> <h2 id="_3-3-启动docker-ce"><a href="#_3-3-启动docker-ce" class="header-anchor">#</a> 3.3 启动Docker-ce</h2> <ol><li>开机并启动docker</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> docker 
<span class="token function">sudo</span> systemctl start docker 
</code></pre></div><ol start="2"><li>重启，登录确认<code>docker</code>已经运行</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>itcast@ubuntu:~$ <span class="token function">sudo</span> docker <span class="token function">ps</span> 
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
</code></pre></div><ol start="3"><li>下载<code>Alpine</code>镜像热身一下 <code>Docker</code></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>~$ <span class="token function">sudo</span> docker run -it --rm alpine:latest <span class="token function">sh</span> 
</code></pre></div><p>输出内容如下，我们在<code>Docker</code>容器中测试三个命令，分别是</p> <div class="language-bash extra-class"><pre class="language-bash"><code>- <span class="token variable"><span class="token variable">`</span><span class="token function">date</span><span class="token variable">`</span></span>
- <span class="token variable"><span class="token variable">`</span><span class="token function">time</span><span class="token variable">`</span></span>
- <span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> -r<span class="token variable">`</span></span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>itcast@ubuntu:~$ <span class="token function">sudo</span> docker run -it --rm alpine:latest <span class="token function">sh</span> 
Unable to <span class="token function">find</span> image <span class="token string">'alpine:latest'</span> locally
latest: Pulling from library/alpine
e7c96db7181b: Pull complete 
Digest: sha256:769fddc7cc2f0a1c35abb2f91432e8beecf83916c421420e6a6da9f8975464b6
Status: Downloaded newer image <span class="token keyword">for</span> alpine:latest
/ <span class="token comment"># date</span>
Mon Jun <span class="token number">10</span> 07:56:01 UTC <span class="token number">2019</span>
/ <span class="token comment"># time</span>
BusyBox v1.29.3 <span class="token punctuation">(</span><span class="token number">2019</span>-01-24 07:45:07 UTC<span class="token punctuation">)</span> multi-call binary.

Usage: <span class="token function">time</span> <span class="token punctuation">[</span>-vpa<span class="token punctuation">]</span> <span class="token punctuation">[</span>-o FILE<span class="token punctuation">]</span> PROG ARGS

Run PROG, display resource usage when it exits

	-v	Verbose
	-p	POSIX output <span class="token function">format</span>
	-f FMT	Custom <span class="token function">format</span>
	-o FILE	Write result to FILE
	-a	Append <span class="token punctuation">(</span>else overwrite<span class="token punctuation">)</span>
/ <span class="token comment"># uname -r </span>
<span class="token number">4.18</span>.0-10-generic

</code></pre></div><p><img src="/assets/img/docker3.ad5aad6f.jpg" alt="docker3"></p> <h2 id="_3-4-创建docker用户组并添加当前用户"><a href="#_3-4-创建docker用户组并添加当前用户" class="header-anchor">#</a> 3.4 创建Docker用户组并添加当前用户</h2> <p>使用您的用户登录Linux然后执行如下操作，用户组docker可能已经存在。</p> <p>如果使用普通用户目前是无法使用docker指令的</p> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@master:~$ docker <span class="token function">ps</span>
Got permission denied <span class="token keyword">while</span> trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get http://%2Fvar%2Frun%2Fdocker.sock/v1.38/containers/json: dial unix /var/run/docker.sock: connect: permission denied
</code></pre></div><p>我们需要将当前的普通用户添加到当前的docker用户组中</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">groupadd</span> docker
<span class="token function">sudo</span> <span class="token function">usermod</span> -aG docker <span class="token environment constant">$USER</span>
<span class="token builtin class-name">exit</span>
</code></pre></div><p>重新登录使用普通用户登录:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@master:~$ docker <span class="token function">ps</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
</code></pre></div><p>就可以使用了。</p> <h2 id="_3-5-申请阿里云镜像加速器"><a href="#_3-5-申请阿里云镜像加速器" class="header-anchor">#</a> 3.5 申请阿里云镜像加速器</h2> <p>如果不申请阿里云私人专属镜像加速器，鼓励复制如下本人申请的私人专属镜像加速器，直接使用即可。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>https://ozcouv1b.mirror.aliyuncs.com
</code></pre></div><p><strong>申请步骤如下</strong></p> <p>在阿里云注册自己账户</p> <p>找到<strong>容器镜像服务</strong>，参考网址如下</p> <div class="language-shell extra-class"><pre class="language-shell"><code>https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors
</code></pre></div><p>点开左侧菜单<strong>镜像中心</strong>—&gt;<strong>镜像加速器</strong></p> <p>右侧加速器地址，即使私人专属的镜像加速器地址，点击<strong>复制</strong></p> <p>粘贴到一个文本文件留存</p> <p>![docker4](/Users/apple/Nustore Files/我的坚果云/课程研发/k8s/assert/docker4.jpg)</p> <hr> <h2 id="_3-6-docker配置国内镜像加速器"><a href="#_3-6-docker配置国内镜像加速器" class="header-anchor">#</a> 3.6 docker配置国内镜像加速器</h2> <blockquote><p>目的 : 为了下载docker镜像更快</p></blockquote> <p>您可以通过修改<code>daemon</code>配置文件<code>/etc/docker/daemon.json</code>来使用加速器。</p> <p>创建<code>/etc/docker/daemon.json</code>文件，内容如下：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;registry-mirrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;https://ozcouv1b.mirror.aliyuncs.com&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>重启docker服务</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 重载所有修改过的配置文件</span>
<span class="token function">sudo</span> systemctl daemon-reload
<span class="token comment"># 重启Docker服务</span>
<span class="token function">sudo</span> systemctl restart docker
</code></pre></div><h1 id="四、kubernetes-安装及部署"><a href="#四、kubernetes-安装及部署" class="header-anchor">#</a> 四、Kubernetes 安装及部署</h1> <h2 id="_4-1-k8s安装环境准备"><a href="#_4-1-k8s安装环境准备" class="header-anchor">#</a> 4.1 k8s安装环境准备</h2> <h3 id="_4-1-1-配置并安装k8s国内源"><a href="#_4-1-1-配置并安装k8s国内源" class="header-anchor">#</a> 4.1.1 配置并安装k8s国内源</h3> <ol><li><p>创建配置文件<code>sudo touch /etc/apt/sources.list.d/kubernetes.list</code></p></li> <li><p>添加写权限</p> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@master:~$ <span class="token function">sudo</span> <span class="token function">chmod</span> <span class="token number">666</span> /etc/apt/sources.list.d/kubernetes.list 
</code></pre></div><p>再添加，内容如下:</p> <div class="language- extra-class"><pre class="language-text"><code>deb http://mirrors.ustc.edu.cn/kubernetes/apt kubernetes-xenial main
</code></pre></div></li> <li><p>执行<code>sudo apt update</code> 更新操作系统源，开始会遇见如下错误</p> <div class="language-bash extra-class"><pre class="language-bash"><code>tcast@master:~$ <span class="token function">sudo</span> <span class="token function">apt</span> update
Get:1 http://mirrors.ustc.edu.cn/kubernetes/apt kubernetes-xenial InRelease <span class="token punctuation">[</span><span class="token number">8,993</span> B<span class="token punctuation">]</span>
Err:1 http://mirrors.ustc.edu.cn/kubernetes/apt kubernetes-xenial InRelease    
  The following signatures couldn<span class="token string">'t be verified because the public key is not available: NO_PUBKEY 6A030B21BA07F4FB
Hit:2 http://mirrors.aliyun.com/ubuntu cosmic InRelease                        
Hit:3 http://mirrors.aliyun.com/ubuntu cosmic-updates InRelease                
Hit:4 http://mirrors.aliyun.com/ubuntu cosmic-backports InRelease              
Hit:5 http://mirrors.aliyun.com/ubuntu cosmic-security InRelease               
Err:6 https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu cosmic InRelease      
  Could not wait for server fd - select (11: Resource temporarily unavailable) [IP: 202.141.176.110 443]
Reading package lists... Done                          
W: GPG error: http://mirrors.ustc.edu.cn/kubernetes/apt kubernetes-xenial InRelease: The following signatures couldn'</span>t be verified because the public key is not available: NO_PUBKEY 6A030B21BA07F4FB
E: The repository <span class="token string">'http://mirrors.ustc.edu.cn/kubernetes/apt kubernetes-xenial InRelease'</span> is not signed.
N: Updating from such a repository can't be <span class="token keyword">done</span> securely, and is therefore disabled by default.
N: See apt-secure<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> manpage <span class="token keyword">for</span> repository creation and user configuration details.
</code></pre></div><p>其中：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 6A030B21BA07F4FB
</code></pre></div><p>签名认证失败，需要重新生成。记住上面的<em>NO_PUBKEY</em> <code>6A030B21BA07F4FB</code></p></li> <li><p>添加认证key</p> <p>运行如下命令，添加错误中对应的key(错误中NO_PUBKEY后面的key的后8位)</p> <div class="language-shell extra-class"><pre class="language-shell"><code>gpg --keyserver keyserver.ubuntu.com --recv-keys BA07F4FB
</code></pre></div><p>接着运行如下命令，确认看到<strong>OK</strong>，说明成功，之后进行安装:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>gpg --export --armor BA07F4FB <span class="token operator">|</span> <span class="token function">sudo</span> apt-key <span class="token function">add</span> -
</code></pre></div></li> <li><p>再次重新<code>sudo apt update</code>更新系统下载源数据列表</p></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@master:~$ <span class="token function">sudo</span> <span class="token function">apt</span> update
Hit:1 https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu cosmic InRelease                  
Hit:2 http://mirrors.aliyun.com/ubuntu cosmic InRelease                                    
Hit:3 http://mirrors.aliyun.com/ubuntu cosmic-updates InRelease                            
Hit:4 http://mirrors.aliyun.com/ubuntu cosmic-backports InRelease                          
Hit:5 http://mirrors.aliyun.com/ubuntu cosmic-security InRelease                           
Get:6 http://mirrors.ustc.edu.cn/kubernetes/apt kubernetes-xenial InRelease <span class="token punctuation">[</span><span class="token number">8,993</span> B<span class="token punctuation">]</span>      
Ign:7 http://mirrors.ustc.edu.cn/kubernetes/apt kubernetes-xenial/main amd64 Packages
Get:7 http://mirrors.ustc.edu.cn/kubernetes/apt kubernetes-xenial/main amd64 Packages <span class="token punctuation">[</span><span class="token number">26.6</span> kB<span class="token punctuation">]</span>
Fetched <span class="token number">26.6</span> kB <span class="token keyword">in</span> 42s <span class="token punctuation">(</span><span class="token number">635</span> B/s<span class="token punctuation">)</span>    
Reading package lists<span class="token punctuation">..</span>. Done
Building dependency tree       
Reading state information<span class="token punctuation">..</span>. Done
<span class="token number">165</span> packages can be upgraded. Run <span class="token string">'apt list --upgradable'</span> to see them.
</code></pre></div><p>以上没有报和错误异常，表示成功。</p> <h3 id="_4-1-2-禁止基础设施"><a href="#_4-1-2-禁止基础设施" class="header-anchor">#</a> 4.1.2 禁止基础设施</h3> <ol><li><p>禁止防火墙</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">sudo</span> ufw disable
Firewall stopped and disabled on system startup
</code></pre></div></li> <li><p>关闭swap</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 成功</span>
$ <span class="token function">sudo</span> swapoff -a 
<span class="token comment"># 永久关闭swap分区</span>
$ <span class="token function">sudo</span> <span class="token function">sed</span> -i <span class="token string">'s/.*swap.*/#&amp;/'</span> /etc/fstab
</code></pre></div></li> <li><p>禁止selinux</p></li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 安装操控selinux的命令</span>
$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> -y selinux-utils
<span class="token comment"># 禁止selinux</span>
$ setenforce <span class="token number">0</span>
<span class="token comment"># 重启操作系统</span>
$ <span class="token function">shutdown</span> -r now
<span class="token comment"># 查看selinux是否已经关闭</span>
$ <span class="token function">sudo</span> getenforce
Disabled<span class="token punctuation">(</span>表示已经关闭<span class="token punctuation">)</span>
</code></pre></div><h2 id="_4-2-k8s系统网络配置"><a href="#_4-2-k8s系统网络配置" class="header-anchor">#</a> 4.2 k8s系统网络配置</h2> <p>(1) 配置内核参数，将桥接的IPv4流量传递到iptables的链</p> <p>创建<code>/etc/sysctl.d/k8s.conf</code>文件</p> <p>添加内容如下:</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token constant">net.bridge.bridge-nf-call-ip6tables</span> <span class="token attr-value"><span class="token punctuation">=</span> 1</span>
<span class="token constant">net.bridge.bridge-nf-call-iptables</span> <span class="token attr-value"><span class="token punctuation">=</span> 1</span>
<span class="token constant">vm.swappiness</span> <span class="token attr-value"><span class="token punctuation">=</span> 0</span>
</code></pre></div><p>(2) 执行命令使修改生效</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 【候选】建议执行下面的命令</span>
$ <span class="token function">sudo</span> modprobe br_netfilter
$ <span class="token function">sudo</span> sysctl -p /etc/sysctl.d/k8s.conf
</code></pre></div><h2 id="_4-3-安装k8s"><a href="#_4-3-安装k8s" class="header-anchor">#</a> 4.3 安装k8s</h2> <blockquote><p><strong>注意: 切换到root用户 <code>$ su</code></strong></p></blockquote> <ol><li><p>安装Kubernetes 目前安装版本  <code>v1.13.1</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">apt</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">apt-get</span> <span class="token function">install</span> -y <span class="token assign-left variable">kubelet</span><span class="token operator">=</span><span class="token number">1.13</span>.1-00 kubernetes-cni<span class="token operator">=</span><span class="token number">0.6</span>.0-00 <span class="token assign-left variable">kubeadm</span><span class="token operator">=</span><span class="token number">1.13</span>.1-00 <span class="token assign-left variable">kubectl</span><span class="token operator">=</span><span class="token number">1.13</span>.1-00
</code></pre></div></li> <li><p>设置为开机重启</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> kubelet <span class="token operator">&amp;&amp;</span> systemctl start kubelet
$ <span class="token function">sudo</span> <span class="token function">shutdown</span> -r now
</code></pre></div></li></ol> <h2 id="_4-4-验证k8s"><a href="#_4-4-验证k8s" class="header-anchor">#</a> 4.4 验证k8s</h2> <ol><li><p>使用root用户登录<code>Master</code>主机</p></li> <li><p>执行如下个命令</p> <div class="language-shell extra-class"><pre class="language-shell"><code>kubectl get nodes 
</code></pre></div></li></ol> <p>输出如下</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl get nodes
The connection to the server localhost:8080 was refused - did you specify the right <span class="token function">host</span> or port?
</code></pre></div><ol start="3"><li><p>查看当前k8s版本</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ kubectl version
</code></pre></div></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>Client Version: version.Info<span class="token punctuation">{</span>Major:<span class="token string">&quot;1&quot;</span>, Minor:<span class="token string">&quot;13&quot;</span>, GitVersion:<span class="token string">&quot;v1.13.1&quot;</span>, GitCommit:<span class="token string">&quot;eec55b9ba98609a46fee712359c7b5b365bdd920&quot;</span>, GitTreeState:<span class="token string">&quot;clean&quot;</span>, BuildDate:<span class="token string">&quot;2018-12-13T10:39:04Z&quot;</span>, GoVersion:<span class="token string">&quot;go1.11.2&quot;</span>, Compiler:<span class="token string">&quot;gc&quot;</span>, Platform:<span class="token string">&quot;linux/amd64&quot;</span><span class="token punctuation">}</span>
The connection to the server localhost:8080 was refused - did you specify the right <span class="token function">host</span> or port?
</code></pre></div><h1 id="五、创建企业kubernetes多主机集群环境"><a href="#五、创建企业kubernetes多主机集群环境" class="header-anchor">#</a> 五、创建企业Kubernetes多主机集群环境</h1> <h2 id="_5-1-创建两个节点-两个虚拟机"><a href="#_5-1-创建两个节点-两个虚拟机" class="header-anchor">#</a> 5.1 创建两个节点(两个虚拟机)</h2> <ol><li>在VMWare中创建完整克隆，分别命名为<code>UbuntuNode1</code>和<code>UbuntuNode2</code></li></ol> <p>![k8snode1](/Users/apple/Nustore Files/我的坚果云/课程研发/k8s/assert/k8snode1.jpg)</p> <p>分别对两个完整克隆的虚拟机进行如下操作，修改主机名称和静态IP</p> <ol><li>使用root用户登录</li> <li>打开配置文件<code>vim /etc/cloud/cloud.cfg</code></li> <li>修改配置<code>preserve_hostname: true</code></li></ol> <p>![k8snode2](/Users/apple/Nustore Files/我的坚果云/课程研发/k8s/assert/k8snode2.jpg)</p> <ol start="3"><li>修改<code>/etc/hostname</code>，只有一行 <code>node1</code>或<code>node2</code></li></ol> <h2 id="_5-2-master和node基础配置"><a href="#_5-2-master和node基础配置" class="header-anchor">#</a> 5.2 master和node基础配置</h2> <h3 id="_5-2-1-给node配置hostname"><a href="#_5-2-1-给node配置hostname" class="header-anchor">#</a> 5.2.1 给node配置hostname</h3> <p><code>node1</code>主机</p> <p>/etc/hostname</p> <div class="language-bash extra-class"><pre class="language-bash"><code>node1
</code></pre></div><p><code>node2</code>主机</p> <p>/et/hostname</p> <div class="language-bash extra-class"><pre class="language-bash"><code>node2
</code></pre></div><p>2.确认配置的三台机器的主机名称</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">cat</span> /etc/hosts
$ <span class="token function">shutdown</span> -r now
</code></pre></div><h3 id="_5-2-2-配置ip地址"><a href="#_5-2-2-配置ip地址" class="header-anchor">#</a> 5.2.2 配置IP地址</h3> <ul><li>master</li></ul> <p><code>/etc/netplan/50-cloud-init.yaml</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code>network:
    ethernets:
        ens33:
            addresses: <span class="token punctuation">[</span><span class="token number">192.168</span>.236.177/24<span class="token punctuation">]</span>
            dhcp4: <span class="token boolean">false</span>
            gateway4: <span class="token number">192.168</span>.236.2
            nameservers:
                       addresses: <span class="token punctuation">[</span><span class="token number">192.168</span>.236.2<span class="token punctuation">]</span>
            optional: <span class="token boolean">true</span>
    version: <span class="token number">2</span>
</code></pre></div><p>重启ip配置</p> <div class="language-bash extra-class"><pre class="language-bash"><code>netplan apply
</code></pre></div><ul><li>node1</li></ul> <p><code>/etc/netplan/50-cloud-init.yaml</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code>network:
    ethernets:
        ens33:
            addresses: <span class="token punctuation">[</span><span class="token number">192.168</span>.236.178/24<span class="token punctuation">]</span>
            dhcp4: <span class="token boolean">false</span>
            gateway4: <span class="token number">192.168</span>.236.2
            nameservers:
                       addresses: <span class="token punctuation">[</span><span class="token number">192.168</span>.236.2<span class="token punctuation">]</span>
            optional: <span class="token boolean">true</span>
    version: <span class="token number">2</span>
</code></pre></div><p>重启ip配置</p> <div class="language-bash extra-class"><pre class="language-bash"><code>netplan apply
</code></pre></div><ul><li>node2</li></ul> <p><code>/etc/netplan/50-cloud-init.yaml</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code>network:
    ethernets:
        ens33:
            addresses: <span class="token punctuation">[</span><span class="token number">192.168</span>.236.179/24<span class="token punctuation">]</span>
            dhcp4: <span class="token boolean">false</span>
            gateway4: <span class="token number">192.168</span>.236.2
            nameservers:
                       addresses: <span class="token punctuation">[</span><span class="token number">192.168</span>.236.2<span class="token punctuation">]</span>
            optional: <span class="token boolean">true</span>
    version: <span class="token number">2</span>
</code></pre></div><p>重启ip配置</p> <div class="language-bash extra-class"><pre class="language-bash"><code>netplan apply
</code></pre></div><h3 id="_5-2-3-修改hosts文件"><a href="#_5-2-3-修改hosts文件" class="header-anchor">#</a> 5.2.3 修改hosts文件</h3> <p>注意： (Master、Node1、Node2都需要配置)</p> <p>使用root用户登录</p> <ol><li><p>打开hosts文件 <code>vim /etc/hosts</code></p></li> <li><p>输入如下内容</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">192.168</span>.236.177 master
<span class="token number">192.168</span>.236.178 node1
<span class="token number">192.168</span>.236.179 node2
</code></pre></div></li> <li><p>重启机器<code>shutdown -r now</code></p></li></ol> <h2 id="_5-3-配置master节点"><a href="#_5-3-配置master节点" class="header-anchor">#</a> 5.3 配置Master节点</h2> <h3 id="_5-3-1-创建工作目录"><a href="#_5-3-1-创建工作目录" class="header-anchor">#</a> 5.3.1 创建工作目录</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">mkdir</span> /home/itcast/working
$ <span class="token builtin class-name">cd</span> /home/itcast/working/
</code></pre></div><h3 id="_5-3-2-创建kubeadm-conf配置文件"><a href="#_5-3-2-创建kubeadm-conf配置文件" class="header-anchor">#</a> 5.3.2 创建kubeadm.conf配置文件</h3> <ol><li>创建k8s的管理工具<code>kubeadm</code>对应的配置文件，候选操作在<code>home/itcast/working/</code>目录下</li></ol> <p>使用kubeadm配置文件，通过在配置文件中指定docker仓库地址，便于内网快速部署。</p> <p>生成配置文件</p> <div class="language- extra-class"><pre class="language-text"><code>kubeadm config print init-defaults ClusterConfiguration &gt; kubeadm.conf
</code></pre></div><ol start="2"><li>修改<code>kubeadm.conf</code>中的如下两项:</li></ol> <ul><li>imageRepository</li> <li>kubernetesVersion</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">vi</span> kubeadm.conf
<span class="token comment"># 修改 imageRepository: k8s.gcr.io</span>
<span class="token comment"># 改为 registry.cn-beijing.aliyuncs.com/imcto</span>
imageRepository: registry.cn-beijing.aliyuncs.com/imcto
<span class="token comment"># 修改kubernetes版本kubernetesVersion: v1.13.0</span>
<span class="token comment"># 改为kubernetesVersion: v1.13.1</span>
kubernetesVersion: v1.13.1
</code></pre></div><ol start="3"><li>修改<code>kubeadm.conf</code>中的API服务器地址，后面会频繁使用这个地址。</li></ol> <ul><li>localAPIEndpoint:</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>localAPIEndpoint:
  advertiseAddress: <span class="token number">192.168</span>.236.177
  bindPort: <span class="token number">6443</span>
</code></pre></div><blockquote><p>注意: <code>192.168.236.177</code>是master主机的ip地址</p></blockquote> <ol start="4"><li>配置子网网络</li></ol> <div class="language-ini extra-class"><pre class="language-ini"><code>networking:
  dnsDomain: cluster.local
  podSubnet: 10.244.0.0/16
  serviceSubnet: 10.96.0.0/12
scheduler: {}
</code></pre></div><p>这里的<code>10.244.0.0/16</code> 和 <code>10.96.0.0/12</code>分别是k8s内部pods和services的子网网络，最好使用这个地址，后续flannel网络需要用到。</p> <h3 id="_5-3-3-拉取k8s必备的模块镜像"><a href="#_5-3-3-拉取k8s必备的模块镜像" class="header-anchor">#</a> 5.3.3 拉取K8s必备的模块镜像</h3> <ol><li>查看一下都需要哪些镜像文件需要拉取</li></ol> <div class="language- extra-class"><pre class="language-text"><code>$ kubeadm config images list --config kubeadm.conf
registry.cn-beijing.aliyuncs.com/imcto/kube-apiserver:v1.13.1
registry.cn-beijing.aliyuncs.com/imcto/kube-controller-manager:v1.13.1
registry.cn-beijing.aliyuncs.com/imcto/kube-scheduler:v1.13.1
registry.cn-beijing.aliyuncs.com/imcto/kube-proxy:v1.13.1
registry.cn-beijing.aliyuncs.com/imcto/pause:3.1
registry.cn-beijing.aliyuncs.com/imcto/etcd:3.2.24
registry.cn-beijing.aliyuncs.com/imcto/coredns:1.2.6
</code></pre></div><ol start="2"><li>拉取镜像</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#下载全部当前版本的k8s所关联的镜像</span>
kubeadm config images pull --config ./kubeadm.conf
</code></pre></div><h3 id="_5-3-4-初始化kubernetes环境"><a href="#_5-3-4-初始化kubernetes环境" class="header-anchor">#</a> 5.3.4 初始化kubernetes环境</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#初始化并且启动</span>
$ <span class="token function">sudo</span> kubeadm init --config ./kubeadm.conf
</code></pre></div><p>更多kubeadm配置文件参数详见</p> <div class="language- extra-class"><pre class="language-text"><code>kubeadm config print-defaults
</code></pre></div><p><strong>k8s启动成功输出内容较多，但是记住末尾的内容</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>Your Kubernetes master has initialized successfully<span class="token operator">!</span>

To start using your cluster, you need to run the following as a regular user:

  <span class="token function">mkdir</span> -p <span class="token environment constant">$HOME</span>/.kube
  <span class="token function">sudo</span> <span class="token function">cp</span> -i /etc/kubernetes/admin.conf <span class="token environment constant">$HOME</span>/.kube/config
  <span class="token function">sudo</span> <span class="token function">chown</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> -u<span class="token variable">)</span></span><span class="token builtin class-name">:</span><span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> -g<span class="token variable">)</span></span> <span class="token environment constant">$HOME</span>/.kube/config

You should now deploy a pod network to the cluster.
Run <span class="token string">&quot;kubectl apply -f [podnetwork].yaml&quot;</span> with one of the options listed at:
  https://kubernetes.io/docs/concepts/cluster-administration/addons/

You can now <span class="token function">join</span> any number of machines by running the following on each node
as root:

  kubeadm <span class="token function">join</span> <span class="token number">192.168</span>.236.177:6443 --token abcdef.0123456789abcdef --discovery-token-ca-cert-hash sha256:e778d3665e52f5a680a87b00c6d54df726c2eda601c0db3bfa4bb198af2262a8
</code></pre></div><p>按照官方提示，执行以下操作。</p> <ol><li><p>执行如下命令</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">mkdir</span> -p <span class="token environment constant">$HOME</span>/.kube
$ <span class="token function">sudo</span> <span class="token function">cp</span> -i /etc/kubernetes/admin.conf <span class="token environment constant">$HOME</span>/.kube/config
$ <span class="token function">sudo</span> <span class="token function">chown</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> -u<span class="token variable">)</span></span><span class="token builtin class-name">:</span><span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> -g<span class="token variable">)</span></span> <span class="token environment constant">$HOME</span>/.kube/config
</code></pre></div></li> <li><p>创建系统服务并启动</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 启动kubelet 设置为开机自启动</span>
$ <span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> kubelet
<span class="token comment"># 启动k8s服务程序</span>
$ <span class="token function">sudo</span> systemctl start kubelet
</code></pre></div></li></ol> <h3 id="_5-3-5-验证kubernetes启动结果"><a href="#_5-3-5-验证kubernetes启动结果" class="header-anchor">#</a> 5.3.5 验证kubernetes启动结果</h3> <ol><li>验证输入，注意显示master状态是<code>NotReady</code>，证明初始化服务器成功</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl get nodes
NAME     STATUS     ROLES    AGE   VERSION
master   NotReady   master   12m   v1.13.1
</code></pre></div><ol start="2"><li>查看当前k8s集群状态</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl get cs
NAME                 STATUS    MESSAGE              ERROR
scheduler            Healthy   ok
controller-manager   Healthy   ok
etcd-0               Healthy   <span class="token punctuation">{</span><span class="token string">&quot;health&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>目前只有一个master，还没有node，而且是NotReady状态，那么我们需要将node加入到master管理的集群中来。在加入之前，我们需要先配置k8s集群的内部通信网络，这里采用的是flannel网络。</p> <h3 id="_5-3-6-部署集群内部通信flannel网络"><a href="#_5-3-6-部署集群内部通信flannel网络" class="header-anchor">#</a> 5.3.6 部署集群内部通信flannel网络</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">$cd</span> <span class="token environment constant">$HOME</span>/working
<span class="token variable">$wget</span> https://raw.githubusercontent.com/coreos/flannel/a70459be0084506e4ec919aa1c114638878db11b/Documentation/kube-flannel.yml
</code></pre></div><p>编辑这个文件，确保flannel网络是对的,找到<code>net-conf.json</code>标记的内容是否正确。</p> <div class="language-ini extra-class"><pre class="language-ini"><code> net-conf.json: |
    {
      &quot;Network&quot;: &quot;10.244.0.0/16&quot;,
      &quot;Backend&quot;: {
        &quot;Type&quot;: &quot;vxlan&quot;
      }
</code></pre></div><p><strong>这个&quot;10.244.0.0/16&quot;和 ./kubeadm.conf中的podsubnet的地址要一致。</strong></p> <p>应用当前flannel配置文件</p> <div class="language-shell extra-class"><pre class="language-shell"><code>itcast@master:~/working$ kubectl apply -f kube-flannel.yml 
</code></pre></div><p>输出结果如下</p> <div class="language-shell extra-class"><pre class="language-shell"><code>root@master:~/working<span class="token comment"># kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/a70459be0084506e4ec919aa1c114638878db11b/Documentation/kube-flannel.yml</span>
clusterrole.rbac.authorization.k8s.io/flannel created
clusterrolebinding.rbac.authorization.k8s.io/flannel created
serviceaccount/flannel created
configmap/kube-flannel-cfg created
daemonset.extensions/kube-flannel-ds-amd64 created
daemonset.extensions/kube-flannel-ds-arm64 created
daemonset.extensions/kube-flannel-ds-arm created
daemonset.extensions/kube-flannel-ds-ppc64le created
daemonset.extensions/kube-flannel-ds-s390x created
</code></pre></div><p>安装flannel网络前 执行<code>kubectl get nodes</code>输出结果如下</p> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@master:~/working$ kubectl get node
NAME     STATUS     ROLES    AGE   VERSION
master   NotReady   master   10m   v1.13.1
</code></pre></div><p>安装flannel网络后 执行<code>kubectl get nodes</code>输出结果如下</p> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@master:~/working$ kubectl get node
NAME     STATUS   ROLES    AGE   VERSION
master   Ready    master   10m   v1.13.1
</code></pre></div><p>此时master已经是<code>Ready</code>状态了，表示已经配置成功了，那么我们就需要配置node来加入这个集群。</p> <h2 id="_5-4-配置node"><a href="#_5-4-配置node" class="header-anchor">#</a> 5.4 配置Node</h2> <h3 id="_5-4-1-确认外部环境"><a href="#_5-4-1-确认外部环境" class="header-anchor">#</a> 5.4.1 确认外部环境</h3> <ol><li><p>确认关闭swap</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">apt</span> <span class="token function">install</span> -y selinux-utils
swapoff -a
</code></pre></div></li> <li><p>禁止selinux</p> <div class="language-shell extra-class"><pre class="language-shell"><code>setenforce <span class="token number">0</span>
</code></pre></div></li> <li><p>确认关闭防火墙</p> <div class="language-shell extra-class"><pre class="language-shell"><code>ufw disable
</code></pre></div></li></ol> <h3 id="_5-4-2-配置k8s集群的node主机环境"><a href="#_5-4-2-配置k8s集群的node主机环境" class="header-anchor">#</a> 5.4.2 配置k8s集群的Node主机环境</h3> <ol><li><p>启动k8s后台服务</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 启动kubelet 设置为开机自启动</span>
$ <span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> kubelet
<span class="token comment"># 启动k8s服务程序</span>
$ <span class="token function">sudo</span> systemctl start kubelet
</code></pre></div></li> <li><p>将master机器的<code>/etc/kubernetes/admin.conf</code>传到到node1和node2</p> <p>登录<code>master</code>终端</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#将admin.conf传递给node1</span>
<span class="token function">sudo</span> <span class="token function">scp</span> /etc/kubernetes/admin.conf itcast@192.168.236.178:/home/itcast/
<span class="token comment">#将admin.conf传递给node2</span>
<span class="token function">sudo</span> <span class="token function">scp</span> /etc/kubernetes/admin.conf itcast@192.168.236.179:/home/itcast/
</code></pre></div></li> <li><p>登录<code>node1</code>终端，创建基础kube配置文件环境</p></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">mkdir</span> -p <span class="token environment constant">$HOME</span>/.kube
$ <span class="token function">sudo</span> <span class="token function">cp</span> -i <span class="token environment constant">$HOME</span>/admin.conf <span class="token environment constant">$HOME</span>/.kube/config
$ <span class="token function">sudo</span> <span class="token function">chown</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> -u<span class="token variable">)</span></span><span class="token builtin class-name">:</span><span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> -g<span class="token variable">)</span></span> <span class="token environment constant">$HOME</span>/.kube/config
</code></pre></div><ol start="4"><li>登录<code>node2</code>终端，创建基础kube配置文件环境</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">mkdir</span> -p <span class="token environment constant">$HOME</span>/.kube
$ <span class="token function">sudo</span> <span class="token function">cp</span> -i <span class="token environment constant">$HOME</span>/admin.conf <span class="token environment constant">$HOME</span>/.kube/config
$ <span class="token function">sudo</span> <span class="token function">chown</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> -u<span class="token variable">)</span></span><span class="token builtin class-name">:</span><span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> -g<span class="token variable">)</span></span> <span class="token environment constant">$HOME</span>/.kube/config
</code></pre></div><ol start="5"><li><code>node1</code>和<code>node2</code>分别连接<code>master</code>加入master集群。这里用的是<code>kubeadm join</code>指令</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">sudo</span> kubeadm <span class="token function">join</span> <span class="token number">192.168</span>.236.177:6443 --token abcdef.0123456789abcdef --discovery-token-ca-cert-hash sha256:e778d3665e52f5a680a87b00c6d54df726c2eda601c0db3bfa4bb198af2262a8
</code></pre></div><p>这里要注意，使用的hash应该是<code>master</code>主机 <code>kubeadm init</code>成功之后生成的hash码。</p> <ol start="6"><li>应用两个node主机分别应用flannel网络</li></ol> <p>将<code>master</code>中的<code>kube-flannel.yml</code>分别传递给两个<code>node</code>节点.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#将kube-flannel.yml传递给node1</span>
<span class="token function">sudo</span> <span class="token function">scp</span> <span class="token environment constant">$HOME</span>/working/kube-flannel.yml itcast@192.168.236.178:/home/itcast/
<span class="token comment">#将kube-flannel.yml传递给node2</span>
<span class="token function">sudo</span> <span class="token function">scp</span> <span class="token environment constant">$HOME</span>/working/kube-flannel.yml itcast@192.168.236.179:/home/itcast/
</code></pre></div><p>分别启动<code>flannel</code>网络</p> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@node1:~$ kubectl apply -f kube-flannel.yml 
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>itcast@node2:~$ kubectl apply -f kube-flannel.yml
</code></pre></div><ol start="7"><li>查看node是否已经加入到k8s集群中(需要等一段时间才能ready)</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@node2:~$ kubectl get nodes
NAME     STATUS   ROLES    AGE     VERSION
master   Ready    master   35m     v1.13.1
node1    Ready    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>   2m23s   v1.13.1
node2    Ready    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>   40s     v1.13.1
</code></pre></div><h1 id="六、应用实例"><a href="#六、应用实例" class="header-anchor">#</a> 六、应用实例</h1> <h2 id="_6-1-创建mysql实例"><a href="#_6-1-创建mysql实例" class="header-anchor">#</a> 6.1 创建MySQL实例</h2> <h3 id="_6-1-1-定义描述文件"><a href="#_6-1-1-定义描述文件" class="header-anchor">#</a> 6.1.1 定义描述文件</h3> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ReplicationController                            <span class="token comment">#副本控制器RC</span>
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> mysql                                          <span class="token comment">#RC的名称，全局唯一</span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>                                          <span class="token comment">#Pod副本的期待数量</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> mysql                                         <span class="token comment">#符合目标的Pod拥有此标签</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>                                            <span class="token comment">#根据此模板创建Pod的副本（实例）</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> mysql                                     <span class="token comment">#Pod副本拥有的标签，对应RC的Selector</span>
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>                                      <span class="token comment">#Pod内容器的定义部分</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> mysql                                    <span class="token comment">#容器的名称</span>
        <span class="token key atrule">image</span><span class="token punctuation">:</span> hub.c.163.com/library/mysql              <span class="token comment">#容器对应的Docker image</span>
        <span class="token key atrule">ports</span><span class="token punctuation">:</span> 
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">3306</span>                          <span class="token comment">#容器应用监听的端口号</span>
          <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">3306</span>
        <span class="token key atrule">env</span><span class="token punctuation">:</span>                                           <span class="token comment">#注入容器内的环境变量</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> MYSQL_ROOT_PASSWORD 
          <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">&quot;123456&quot;</span>
</code></pre></div><h3 id="_6-1-2-加载replicationcontroller副本控制器描述文件"><a href="#_6-1-2-加载replicationcontroller副本控制器描述文件" class="header-anchor">#</a> 6.1.2 加载ReplicationController副本控制器描述文件</h3> <p>创建好mysql-rc.yaml后，在master节点使用kubectl命令将它发布到k8s集群中。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>kubectl create -f mysql-rc.yaml
</code></pre></div><h3 id="_6-1-3-查看启动状态"><a href="#_6-1-3-查看启动状态" class="header-anchor">#</a> 6.1.3 查看启动状态</h3> <p>通过查看当前的<code>pods</code>列表，是否已经启动成功:</p> <h3 id="_6-1-4-网络异常解决方案-未出现问题可直接跳过"><a href="#_6-1-4-网络异常解决方案-未出现问题可直接跳过" class="header-anchor">#</a> 6.1.4 网络异常解决方案(未出现问题可直接跳过)</h3> <p>注意：如果这里出现了<code>ContainerCreating</code>状态，那么可以尝试如下解决办法:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@master:~/working$ kubectl get pods
NAME          READY   STATUS              RESTARTS   AGE
mysql-tscrh   <span class="token number">0</span>/1     ContainerCreating   <span class="token number">0</span>          17m
</code></pre></div><p>目前mysql-tscrh 描述文件 已经创建，但是没有启动成功. 状态是<code>ContainerCreating</code> 没有启动起来.</p> <p>通过<code>kubectl describe pods</code>来查看<code>pods</code>的详细状态</p> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@master:~/working$ kubectl describe pods mysql
Name:               mysql-tscrh
Namespace:          default
Priority:           <span class="token number">0</span>
PriorityClassName:  <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
Node:               node1/192.168.236.178
Start Time:         Mon, <span class="token number">17</span> Jun <span class="token number">2019</span> 09:10:35 +0000
Labels:             <span class="token assign-left variable">app</span><span class="token operator">=</span>mysql
Annotations:        <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
Status:             Pending
IP:                 
Controlled By:      ReplicationController/mysql
Containers:
  mysql:
    Container ID:   
    Image:          hub.c.163.com/library/mysql
    Image ID:       
    Port:           <span class="token number">3306</span>/TCP
    Host Port:      <span class="token number">0</span>/TCP
    State:          Waiting
      Reason:       ContainerCreating
    Ready:          False
    Restart Count:  <span class="token number">0</span>
    Environment:
      MYSQL_ROOT_PASSWORD:  <span class="token number">123456</span>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-q6ggq <span class="token punctuation">(</span>ro<span class="token punctuation">)</span>
Conditions:
  Type              Status
  Initialized       True 
  Ready             False 
  ContainersReady   False 
  PodScheduled      True 
Volumes:
  default-token-q6ggq:
    Type:        Secret <span class="token punctuation">(</span>a volume populated by a Secret<span class="token punctuation">)</span>
    SecretName:  default-token-q6ggq
    Optional:    <span class="token boolean">false</span>
QoS Class:       BestEffort
Node-Selectors:  <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
Tolerations:     node.kubernetes.io/not-ready:NoExecute <span class="token keyword">for</span> 300s
                 node.kubernetes.io/unreachable:NoExecute <span class="token keyword">for</span> 300s
Events:
  Type     Reason                  Age                     From               Message
  ----     ------                  ----                    ----               -------
  Normal   Scheduled               22m                     default-scheduler  Successfully assigned default/mysql-tscrh to node1
  Warning  FailedCreatePodSandBox  22m                     kubelet, node1     Failed create pod sandbox: rpc error: code <span class="token operator">=</span> Unknown desc <span class="token operator">=</span> failed to <span class="token builtin class-name">set</span> up sandbox container <span class="token string">&quot;58d143373e767c40610587624c667d8e20dd77fa397952406a085f2ae1dc38e6&quot;</span> network <span class="token keyword">for</span> pod <span class="token string">&quot;mysql-tscrh&quot;</span><span class="token builtin class-name">:</span> NetworkPlugin cni failed to <span class="token builtin class-name">set</span> up pod <span class="token string">&quot;mysql-tscrh_default&quot;</span> network: <span class="token function">open</span> /run/flannel/subnet.env: no such <span class="token function">file</span> or directory
  Warning  FailedCreatePodSandBox  22m                     kubelet, node1     Failed create pod sandbox: rpc error: code <span class="token operator">=</span> Unknown desc <span class="token operator">=</span> failed to <span class="token builtin class-name">set</span> up sandbox container <span class="token string">&quot;81d12726dbe075c64af48142638e98863231e8201ccc292f0dda1fccfa7fdaec&quot;</span> network <span class="token keyword">for</span> pod <span class="token string">&quot;mysql-tscrh&quot;</span><span class="token builtin class-name">:</span> NetworkPlugin cni failed to <span class="token builtin class-name">set</span> up pod <span class="token string">&quot;mysql-tscrh_default&quot;</span> network: <span class="token function">open</span> /run/flannel/subnet.env: no such <span class="token function">file</span> or directory
  Warning  FailedCreatePodSandBox  22m                     kubelet, node1     Failed create pod sandbox: rpc error: code <span class="token operator">=</span> Unknown desc <span class="token operator">=</span> failed to <span class="token builtin class-name">set</span> up sandbox container <span class="token string">&quot;8bd77ee0176d369435ead7bd3c2675b7bbcbdc2b052cf34c784f04053a7d5288&quot;</span> network <span class="token keyword">for</span> pod <span class="token string">&quot;mysql-tscrh&quot;</span><span class="token builtin class-name">:</span> NetworkPlugin cni failed to <span class="token builtin class-name">set</span> up pod <span class="token string">&quot;mysql-tscrh_default&quot;</span> network: <span class="token function">open</span> /run/flannel/subnet.env: no such <span class="token function">file</span> or directory
  Warning  FailedCreatePodSandBox  22m                     kubelet, node1     Failed create pod sandbox: rpc error: code <span class="token operator">=</span> Unknown desc <span class="token operator">=</span> failed to <span class="token builtin class-name">set</span> up sandbox container <span class="token string">&quot;0733fc209e085e96f5823a2280b012a609dace41fda967c5ae951005a8699ce6&quot;</span> network <span class="token keyword">for</span> pod <span class="token string">&quot;mysql-tscrh&quot;</span><span class="token builtin class-name">:</span> NetworkPlugin cni failed to <span class="token builtin class-name">set</span> up pod <span class="token string">&quot;mysql-tscrh_default&quot;</span> network: <span class="token function">open</span> /run/flannel/subnet.env: no such <span class="token function">file</span> or directory
  Warning  FailedCreatePodSandBox  22m                     kubelet, node1     Failed create pod sandbox: rpc error: code <span class="token operator">=</span> Unknown desc <span class="token operator">=</span> failed to <span class="token builtin class-name">set</span> up sandbox container <span class="token string">&quot;91f337eb334612b2e7426d820ba4b15a9c9c549050517d459508832b69780b5f&quot;</span> network <span class="token keyword">for</span> pod <span class="token string">&quot;mysql-tscrh&quot;</span><span class="token builtin class-name">:</span> NetworkPlugin cni failed to <span class="token builtin class-name">set</span> up pod <span class="token string">&quot;mysql-tscrh_default&quot;</span> network: <span class="token function">open</span> /run/flannel/subnet.env: no such <span class="token function">file</span> or directory
  Warning  FailedCreatePodSandBox  22m                     kubelet, node1     Failed create pod sandbox: rpc error: code <span class="token operator">=</span> Unknown desc <span class="token operator">=</span> failed to <span class="token builtin class-name">set</span> up sandbox container <span class="token string">&quot;48cbba9896068a774d9128a6864394e8726a0d857bae61036421ad73f5d6e3dd&quot;</span> network <span class="token keyword">for</span> pod <span class="token string">&quot;mysql-tscrh&quot;</span><span class="token builtin class-name">:</span> NetworkPlugin cni failed to <span class="token builtin class-name">set</span> up pod <span class="token string">&quot;mysql-tscrh_default&quot;</span> network: <span class="token function">open</span> /run/flannel/subnet.env: no such <span class="token function">file</span> or directory
  Warning  FailedCreatePodSandBox  22m                     kubelet, node1     Failed create pod sandbox: rpc error: code <span class="token operator">=</span> Unknown desc <span class="token operator">=</span> failed to <span class="token builtin class-name">set</span> up sandbox container <span class="token string">&quot;d259778aa19418a9a429b3175b66afae3d8ffb7324ec9df492b2947dbc153460&quot;</span> network <span class="token keyword">for</span> pod <span class="token string">&quot;mysql-tscrh&quot;</span><span class="token builtin class-name">:</span> NetworkPlugin cni failed to <span class="token builtin class-name">set</span> up pod <span class="token string">&quot;mysql-tscrh_default&quot;</span> network: <span class="token function">open</span> /run/flannel/subnet.env: no such <span class="token function">file</span> or directory
  Warning  FailedCreatePodSandBox  22m                     kubelet, node1     Failed create pod sandbox: rpc error: code <span class="token operator">=</span> Unknown desc <span class="token operator">=</span> failed to <span class="token builtin class-name">set</span> up sandbox container <span class="token string">&quot;3d01c00ac9eaac7b2e983402be38c1cf60c4bbd1d454aa45329ce0ca0c2bf792&quot;</span> network <span class="token keyword">for</span> pod <span class="token string">&quot;mysql-tscrh&quot;</span><span class="token builtin class-name">:</span> NetworkPlugin cni failed to <span class="token builtin class-name">set</span> up pod <span class="token string">&quot;mysql-tscrh_default&quot;</span> network: <span class="token function">open</span> /run/flannel/subnet.env: no such <span class="token function">file</span> or directory
  Warning  FailedCreatePodSandBox  22m                     kubelet, node1     Failed create pod sandbox: rpc error: code <span class="token operator">=</span> Unknown desc <span class="token operator">=</span> failed to <span class="token builtin class-name">set</span> up sandbox container <span class="token string">&quot;98879cbb0405dac3a24753dd1986070a53fe9ee9f1b819996a903c19286a2bb7&quot;</span> network <span class="token keyword">for</span> pod <span class="token string">&quot;mysql-tscrh&quot;</span><span class="token builtin class-name">:</span> NetworkPlugin cni failed to <span class="token builtin class-name">set</span> up pod <span class="token string">&quot;mysql-tscrh_default&quot;</span> network: <span class="token function">open</span> /run/flannel/subnet.env: no such <span class="token function">file</span> or directory
  Warning  FailedCreatePodSandBox  7m49s <span class="token punctuation">(</span>x838 over 22m<span class="token punctuation">)</span>   kubelet, node1     <span class="token punctuation">(</span>combined from similar events<span class="token punctuation">)</span>: Failed create pod sandbox: rpc error: code <span class="token operator">=</span> Unknown desc <span class="token operator">=</span> failed to <span class="token builtin class-name">set</span> up sandbox container <span class="token string">&quot;60923335b41c2d0412b279bdb6150f9b9b7eae20c4a02549e35509083c01384b&quot;</span> network <span class="token keyword">for</span> pod <span class="token string">&quot;mysql-tscrh&quot;</span><span class="token builtin class-name">:</span> NetworkPlugin cni failed to <span class="token builtin class-name">set</span> up pod <span class="token string">&quot;mysql-tscrh_default&quot;</span> network: <span class="token function">open</span> /run/flannel/subnet.env: no such <span class="token function">file</span> or directory
  Normal   SandboxChanged          2m49s <span class="token punctuation">(</span>x1127 over 22m<span class="token punctuation">)</span>  kubelet, node1     Pod sandbox changed, it will be killed and re-created.
</code></pre></div><p>会看到一个错误:</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;mysql-tscrh&quot;: NetworkPlugin cni failed to set up pod &quot;mysql-tscrh_default&quot; network: open /run/flannel/subnet.env: no such file or directory
</code></pre></div><p>这是缺少/run/flannel/subnet.env文件</p> <h5 id="解决办法：配置flannel网络"><a href="#解决办法：配置flannel网络" class="header-anchor">#</a> 解决办法：配置flannel网络</h5> <p>分别在三台服务器上执行如下步骤</p> <ol><li><p>创建目录</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> -p /run/flannel
</code></pre></div></li> <li><p>创建环境描述文件</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">sudo</span> <span class="token function">tee</span> /run/flannel/subnet.env <span class="token operator">&lt;&lt;-</span><span class="token string">'EOF'
FLANNEL_NETWORK=10.244.0.0/16
FLANNEL_SUBNET=10.244.0.1/24
FLANNEL_MTU=1450
FLANNEL_IPMASQ=true
EOF</span>
</code></pre></div></li></ol> <h3 id="_6-1-5-查看mysql实例集群状态"><a href="#_6-1-5-查看mysql实例集群状态" class="header-anchor">#</a> 6.1.5 查看mysql实例集群状态</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@master:~/working$ kubectl get pods
NAME          READY   STATUS              RESTARTS   AGE
mysql-tscrh   <span class="token number">0</span>/1     Running   <span class="token number">0</span>          17m
</code></pre></div><p>如果为<code>Running</code>状态，则为mysql集群启动成功。</p> <h2 id="_6-2-创建tomcat实例"><a href="#_6-2-创建tomcat实例" class="header-anchor">#</a> 6.2 创建Tomcat实例</h2> <h3 id="_6-2-1-定义描述文件"><a href="#_6-2-1-定义描述文件" class="header-anchor">#</a> 6.2.1 定义描述文件</h3> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ReplicationController
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> myweb
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">5</span>                                       <span class="token comment">#Pod副本期待数量为5</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> myweb
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> myweb
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> myweb
        <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.io/kubeguide/tomcat<span class="token punctuation">-</span>app<span class="token punctuation">:</span>v1
        <span class="token key atrule">ports</span><span class="token punctuation">:</span> 
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> MYSQL_SERVICE_HOST
          <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">&quot;mysql&quot;</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> MYSQL_SERVICE_PORT
          <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">&quot;3306&quot;</span>
</code></pre></div><h3 id="_6-2-2-加载rc副本描述文件"><a href="#_6-2-2-加载rc副本描述文件" class="header-anchor">#</a> 6.2.2 加载RC副本描述文件</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl create -f myweb-rc.yaml
replicationcontroller/myweb created
$ kubectl get rc
NAME    DESIRED   CURRENT   READY   AGE
mysql   <span class="token number">1</span>         <span class="token number">1</span>         <span class="token number">0</span>       4m22s
myweb   <span class="token number">5</span>         <span class="token number">5</span>         <span class="token number">0</span>       7s
$ kubectl get pods
NAME          READY   STATUS              RESTARTS   AGE
mysql-tp69s   <span class="token number">1</span>/1     Running             <span class="token number">0</span>          21s
myweb-266mz   <span class="token number">0</span>/1     ContainerCreating   <span class="token number">0</span>          2s
myweb-j7nl7   <span class="token number">0</span>/1     ContainerCreating   <span class="token number">0</span>          2s
myweb-s7drm   <span class="token number">0</span>/1     ContainerCreating   <span class="token number">0</span>          2s
myweb-sq4ns   <span class="token number">0</span>/1     ContainerCreating   <span class="token number">0</span>          2s
myweb-t4vlf   <span class="token number">0</span>/1     ContainerCreating   <span class="token number">0</span>          2s
$ 
</code></pre></div><p>注意mysql实例 状态 <code>Running</code></p> <p>myweb实例状态 <code>ContainerCreating</code></p> <p>过几分钟myweb实例状态变成 <code>Running</code></p> <h3 id="_6-2-3-创建服务副本"><a href="#_6-2-3-创建服务副本" class="header-anchor">#</a> 6.2.3 创建服务副本</h3> <p>在master服务器</p> <ol><li>使用root用户登录，并切换到working目录 <code>cd /root/working</code></li> <li>创建描述服务描述文件<code>myweb-svc.yaml</code></li></ol> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> myweb
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
      <span class="token key atrule">nodePort</span><span class="token punctuation">:</span> <span class="token number">30001</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> myweb 
</code></pre></div><h3 id="_6-2-4-部署服务"><a href="#_6-2-4-部署服务" class="header-anchor">#</a> 6.2.4 部署服务</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">$kubectl</span> create -f myweb-svc.yaml
</code></pre></div><h3 id="_6-2-5-验证"><a href="#_6-2-5-验证" class="header-anchor">#</a> 6.2.5 验证</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl get pods
NAME          READY   STATUS    RESTARTS   AGE
mysql-tp69s   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          15m
myweb-266mz   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          14m
myweb-j7nl7   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          14m
myweb-s7drm   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          14m
myweb-sq4ns   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          14m
myweb-t4vlf   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          14m
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>itcast@master:~/working$ kubectl get <span class="token function">service</span>     
NAME         TYPE        CLUSTER-IP       EXTERNAL-IP   PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>          AGE
kubernetes   ClusterIP   <span class="token number">10.96</span>.0.1        <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">443</span>/TCP          19h
myweb        NodePort    <span class="token number">10.109</span>.234.197   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">8080</span>:30001/TCP   25m
</code></pre></div><p>已经看到已经有一个<code>myweb</code>服务已经启动</p> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@master:~/working$ kubectl describe <span class="token function">service</span> myweb
Name:                     myweb
Namespace:                default
Labels:                   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
Annotations:              <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
Selector:                 <span class="token assign-left variable">app</span><span class="token operator">=</span>myweb
Type:                     NodePort
IP:                       <span class="token number">10.109</span>.234.197
Port:                     <span class="token operator">&lt;</span>unset<span class="token operator">&gt;</span>  <span class="token number">8080</span>/TCP
TargetPort:               <span class="token number">8080</span>/TCP
NodePort:                 <span class="token operator">&lt;</span>unset<span class="token operator">&gt;</span>  <span class="token number">30001</span>/TCP
Endpoints:                <span class="token number">10.244</span>.0.6:8080,10.244.0.6:8080,10.244.0.7:8080 + <span class="token number">2</span> more<span class="token punctuation">..</span>.
Session Affinity:         None
External Traffic Policy:  Cluster
Events:                   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
</code></pre></div><p>service详情这里的IP就是CLUSTER-IP. CLUSTER-IP是和service绑定的。</p> <p>service详情这里的Port就是Service的端口号。</p> <p>service详情这里的NodePort就是Node的真实端口号。</p> <p>service详情这里的Endpoints就是容器的IP和port。</p> <p>验证端口号</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">netstat</span> -tlp<span class="token operator">|</span><span class="token function">grep</span> <span class="token number">30001</span>
tcp6       <span class="token number">0</span>      <span class="token number">0</span> <span class="token punctuation">[</span>::<span class="token punctuation">]</span>:30001              <span class="token punctuation">[</span>::<span class="token punctuation">]</span>:*                  LISTEN      <span class="token number">4333</span>/kube-proxy
$
</code></pre></div><p>我们可以打开浏览器，输入master/node1/node2任何一个地址家30001端口都可以，访问tomcat服务。</p> <div class="language- extra-class"><pre class="language-text"><code>http://192.168.236.177:30001
</code></pre></div><h2 id="_6-3-创建自定义的beego-应用web程序集群"><a href="#_6-3-创建自定义的beego-应用web程序集群" class="header-anchor">#</a> 6.3 创建自定义的Beego 应用web程序集群</h2> <h3 id="_6-3-1-初始化mysql"><a href="#_6-3-1-初始化mysql" class="header-anchor">#</a> 6.3.1 初始化mysql</h3> <ol><li>找到我们之前创建好的mysql的pod的<code>NAME</code></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@master:~$ kubectl get pods
NAME          READY   STATUS    RESTARTS   AGE
mysql-kjdz8   <span class="token number">1</span>/1     Running   <span class="token number">2</span>          4d23h
myweb-f7rt4   <span class="token number">1</span>/1     Running   <span class="token number">2</span>          4d23h
myweb-jjxbp   <span class="token number">1</span>/1     Running   <span class="token number">2</span>          4d23h
myweb-k8rmt   <span class="token number">1</span>/1     Running   <span class="token number">2</span>          4d23h
myweb-rht8n   <span class="token number">1</span>/1     Running   <span class="token number">2</span>          4d23h
myweb-wsgzw   <span class="token number">1</span>/1     Running   <span class="token number">2</span>          4d23h
</code></pre></div><ol start="2"><li>查看当前pod的详细信息</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@master:~$ kubectl describe pod mysql-kjdz8

</code></pre></div><ol start="3"><li>得到mysql在subnet内网的IP地址<code>10.244.1.8</code>  和登录密码</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>IP:                 <span class="token number">10.244</span>.1.8 
 <span class="token punctuation">..</span>.
 Environment:
      MYSQL_ROOT_PASSWORD:  <span class="token number">123456</span>
</code></pre></div><ol start="4"><li>登录mysql实例，创建数据库</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@master:~$ kubectl <span class="token builtin class-name">exec</span> -it mysql-kjdz8 -- <span class="token function">bash</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>root@mysql-kjdz8:/<span class="token comment"># mysql -u root --password=123456 --default-character-set=utf8     </span>
</code></pre></div><ol start="5"><li>创建数据库，注意大小写</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> newsWeb  <span class="token keyword">default</span> <span class="token keyword">charset</span> utf8 <span class="token keyword">COLLATE</span> utf8_general_ci<span class="token punctuation">;</span>
</code></pre></div><ol start="6"><li>使用数据库</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">use</span> newsWeb
</code></pre></div><h3 id="_6-3-2-下载自定义的beego-docker-镜像"><a href="#_6-3-2-下载自定义的beego-docker-镜像" class="header-anchor">#</a> 6.3.2 下载自定义的beego-docker 镜像</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@master:~$ docker pull registry.cn-shanghai.aliyuncs.com/itcast-golang/beego-microservices:v4
921b31ab772b: Pull complete 
5dbef71438d6: Pull complete 
06b82a06d476: Pull complete 
903fde8a2004: Pull complete 
5102aca51d1d: Pull complete 
b0ebda6ce096: Pull complete 
1a243f1cae73: Pull complete 
Digest: sha256:7b83e5117d964f348750de76104d6302285410365aaf6e6a0d4f57edab7a0ad5
Status: Downloaded newer image <span class="token keyword">for</span> registry.cn-shanghai.aliyuncs.com/itcast-golang/beego-microservices:v4
</code></pre></div><p>当然，目前该镜像地址是我们自己打包的，如果你想启动你自己的镜像应用，也需要打包成docker镜像放在阿里云或者其他docker仓库中。</p> <p>查看docker镜像是否已经下载成功。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@master:~$ docker images
REPOSITORY                                                            TAG                 IMAGE ID            CREATED             SIZE
registry.cn-shanghai.aliyuncs.com/itcast-golang/beego-microservices   v4                  11f6f974f78b        <span class="token number">35</span> minutes ago      <span class="token number">23</span>.1MB
alpine                                                                latest              055936d39205        <span class="token number">6</span> weeks ago         <span class="token number">5</span>.53MB
registry.cn-beijing.aliyuncs.com/imcto/kube-controller-manager        v1.13.1             6ca952430d0a        <span class="token number">3</span> months ago        146MB
registry.cn-beijing.aliyuncs.com/imcto/kube-proxy                     v1.13.1             a311f9763fcc        <span class="token number">3</span> months ago        <span class="token number">80</span>.2MB
registry.cn-beijing.aliyuncs.com/imcto/coredns                        <span class="token number">1.2</span>.6               782ac1267b76        <span class="token number">3</span> months ago        40MB
registry.cn-beijing.aliyuncs.com/imcto/etcd                           <span class="token number">3.2</span>.24              399cf402bfe9        <span class="token number">3</span> months ago        220MB
registry.cn-beijing.aliyuncs.com/imcto/pause                          <span class="token number">3.1</span>                 73ae15a7a613        <span class="token number">3</span> months ago        742kB
registry.cn-beijing.aliyuncs.com/imcto/kube-scheduler                 v1.13.1             4b8df70aff4e        <span class="token number">3</span> months ago        <span class="token number">79</span>.6MB
registry.cn-beijing.aliyuncs.com/imcto/kube-apiserver                 v1.13.1             06924f18fe15        <span class="token number">3</span> months ago        181MB
quay.io/coreos/flannel                                                v0.11.0-amd64       ff281650a721        <span class="token number">4</span> months ago        <span class="token number">52</span>.6MB
</code></pre></div><h3 id="_6-3-3-创建beego的rc副本文件"><a href="#_6-3-3-创建beego的rc副本文件" class="header-anchor">#</a> 6.3.3 创建beego的RC副本文件</h3> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ReplicationController
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> beego
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">5</span>                                       <span class="token comment">#Pod副本期待数量为5</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> beego
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> beego
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> beego
        <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.cn<span class="token punctuation">-</span>shanghai.aliyuncs.com/itcast<span class="token punctuation">-</span>golang/beego<span class="token punctuation">-</span>microservices<span class="token punctuation">:</span>v4
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> MYSQL_SERVICE_HOST
          <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">&quot;10.244.1.8&quot;</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> MYSQL_SERVICE_PORT
          <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">&quot;3306&quot;</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> MYSQL_SERVICE_USER
          <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">&quot;root&quot;</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> MYSQL_SERVICE_PASSWORD
          <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">&quot;123456&quot;</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> MYSQL_SERVICE_DATABASE
          <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">&quot;newsWeb&quot;</span>
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> beego
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
      <span class="token key atrule">nodePort</span><span class="token punctuation">:</span> <span class="token number">30080</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> beego
~               
</code></pre></div><p>这里要注意，里面的mysql环境变量IP、端口、数据库用户名密码等，都是我们上面实例获取到的。</p> <p>这里实际上是在我们创建一个pods容器的时候，指定的一些环境变量。然后beego的应用程序会从系统中这些环境变量去取数据。</p> <p>目前建立了NodePort端口映射，beegoWeb应用在内网的端口是8080，对外的映射端口是30080.那么30080就是我们外网可以访问的端口号。</p> <h3 id="_6-3-4-装载rc副本文件，创建beego集群实例"><a href="#_6-3-4-装载rc副本文件，创建beego集群实例" class="header-anchor">#</a> 6.3.4 装载RC副本文件，创建beego集群实例</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl apply -f golang-beego.yaml
</code></pre></div><p>查看beego的web程序pods是否已经正常启动</p> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@master:~/working$ kubectl get pods
NAME          READY   STATUS    RESTARTS   AGE
beego-2wt7s   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          2m47s
beego-6jp8x   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          2m47s
beego-7bkvl   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          2m47s
beego-qjldn   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          2m47s
beego-vldmh   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          2m47s
mysql-kjdz8   <span class="token number">1</span>/1     Running   <span class="token number">2</span>          5d
myweb-f7rt4   <span class="token number">1</span>/1     Running   <span class="token number">2</span>          5d
myweb-jjxbp   <span class="token number">1</span>/1     Running   <span class="token number">2</span>          5d
myweb-k8rmt   <span class="token number">1</span>/1     Running   <span class="token number">2</span>          5d
myweb-rht8n   <span class="token number">1</span>/1     Running   <span class="token number">2</span>          5d
myweb-wsgzw   <span class="token number">1</span>/1     Running   <span class="token number">2</span>          5d
</code></pre></div><p>也可以查看beego程序的pods的正常输出日志</p> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@master:~/working$ kubectl log beego-2wt7s     
log is DEPRECATED and will be removed <span class="token keyword">in</span> a future version. Use logs instead.
<span class="token number">2019</span>/06/24 09:19:12 root:123456@tcp<span class="token punctuation">(</span><span class="token number">10.244</span>.1.8:3306<span class="token punctuation">)</span>/newsWeb?charset<span class="token operator">=</span>utf8
table <span class="token variable"><span class="token variable">`</span>user<span class="token variable">`</span></span> already exists, skip
table <span class="token variable"><span class="token variable">`</span>article<span class="token variable">`</span></span> already exists, skip
table <span class="token variable"><span class="token variable">`</span>article_type<span class="token variable">`</span></span> already exists, skip
table <span class="token variable"><span class="token variable">`</span>article_users<span class="token variable">`</span></span> already exists, skip
<span class="token number">2019</span>/06/24 09:19:12.241 <span class="token punctuation">[</span>I<span class="token punctuation">]</span> <span class="token punctuation">[</span>asm_amd64.s:1337<span class="token punctuation">]</span>  http server Running on http://:8080
</code></pre></div><p>进入其中一个beego容器，查看环境变量是否和我们配置的一致</p> <div class="language-bash extra-class"><pre class="language-bash"><code>itcast@master:~/working$ kubectl  <span class="token builtin class-name">exec</span> -it beego-2wt7s -- <span class="token function">sh</span>
/app <span class="token comment"># env</span>
<span class="token assign-left variable">KUBERNETES_SERVICE_PORT</span><span class="token operator">=</span><span class="token number">443</span>
<span class="token assign-left variable">KUBERNETES_PORT</span><span class="token operator">=</span>tcp://10.96.0.1:443
<span class="token assign-left variable">BEEGO_PORT_8080_TCP</span><span class="token operator">=</span>tcp://10.107.31.251:8080
<span class="token assign-left variable"><span class="token environment constant">HOSTNAME</span></span><span class="token operator">=</span>beego-2wt7s
<span class="token assign-left variable">MYWEB_SERVICE_HOST</span><span class="token operator">=</span><span class="token number">10.106</span>.98.4
<span class="token assign-left variable">MYWEB_PORT_8080_TCP_ADDR</span><span class="token operator">=</span><span class="token number">10.106</span>.98.4
<span class="token assign-left variable"><span class="token environment constant">SHLVL</span></span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable"><span class="token environment constant">HOME</span></span><span class="token operator">=</span>/root
<span class="token assign-left variable">MYWEB_PORT_8080_TCP_PORT</span><span class="token operator">=</span><span class="token number">8080</span>
<span class="token assign-left variable">MYWEB_PORT_8080_TCP_PROTO</span><span class="token operator">=</span>tcp
<span class="token assign-left variable">MYWEB_SERVICE_PORT</span><span class="token operator">=</span><span class="token number">8080</span>
<span class="token assign-left variable">MYWEB_PORT</span><span class="token operator">=</span>tcp://10.106.98.4:8080
<span class="token assign-left variable">MYWEB_PORT_8080_TCP</span><span class="token operator">=</span>tcp://10.106.98.4:8080
<span class="token assign-left variable"><span class="token environment constant">TERM</span></span><span class="token operator">=</span>xterm
<span class="token assign-left variable">KUBERNETES_PORT_443_TCP_ADDR</span><span class="token operator">=</span><span class="token number">10.96</span>.0.1
<span class="token assign-left variable">MYSQL_SERVICE_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span>
<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
<span class="token assign-left variable">KUBERNETES_PORT_443_TCP_PORT</span><span class="token operator">=</span><span class="token number">443</span>
<span class="token assign-left variable">MYSQL_SERVICE_HOST</span><span class="token operator">=</span><span class="token number">10.244</span>.1.8
<span class="token assign-left variable">KUBERNETES_PORT_443_TCP_PROTO</span><span class="token operator">=</span>tcp
<span class="token assign-left variable">MYSQL_SERVICE_USER</span><span class="token operator">=</span>root
<span class="token assign-left variable">BEEGO_SERVICE_HOST</span><span class="token operator">=</span><span class="token number">10.107</span>.31.251
<span class="token assign-left variable">BEEGO_PORT_8080_TCP_ADDR</span><span class="token operator">=</span><span class="token number">10.107</span>.31.251
<span class="token assign-left variable">MYSQL_SERVICE_PORT</span><span class="token operator">=</span><span class="token number">3306</span>
<span class="token assign-left variable">KUBERNETES_SERVICE_PORT_HTTPS</span><span class="token operator">=</span><span class="token number">443</span>
<span class="token assign-left variable">KUBERNETES_PORT_443_TCP</span><span class="token operator">=</span>tcp://10.96.0.1:443
<span class="token assign-left variable">BEEGO_PORT_8080_TCP_PORT</span><span class="token operator">=</span><span class="token number">8080</span>
<span class="token assign-left variable">KUBERNETES_SERVICE_HOST</span><span class="token operator">=</span><span class="token number">10.96</span>.0.1
<span class="token assign-left variable">BEEGO_PORT_8080_TCP_PROTO</span><span class="token operator">=</span>tcp
<span class="token assign-left variable"><span class="token environment constant">PWD</span></span><span class="token operator">=</span>/app
<span class="token assign-left variable">MYSQL_SERVICE_DATABASE</span><span class="token operator">=</span>newsWeb
<span class="token assign-left variable">BEEGO_PORT</span><span class="token operator">=</span>tcp://10.107.31.251:8080
<span class="token assign-left variable">BEEGO_SERVICE_PORT</span><span class="token operator">=</span><span class="token number">8080</span>
/app <span class="token comment"># env | grep MYSQL</span>
<span class="token assign-left variable">MYSQL_SERVICE_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span>
<span class="token assign-left variable">MYSQL_SERVICE_HOST</span><span class="token operator">=</span><span class="token number">10.244</span>.1.8
<span class="token assign-left variable">MYSQL_SERVICE_USER</span><span class="token operator">=</span>root
<span class="token assign-left variable">MYSQL_SERVICE_PORT</span><span class="token operator">=</span><span class="token number">3306</span>
<span class="token assign-left variable">MYSQL_SERVICE_DATABASE</span><span class="token operator">=</span>newsWeb
</code></pre></div><h3 id="_6-3-5-验证集群是否成功"><a href="#_6-3-5-验证集群是否成功" class="header-anchor">#</a> 6.3.5 验证集群是否成功</h3> <ul><li>注册界面</li></ul> <p><a href="http://192.168.236.177:30080/register" target="_blank" rel="noopener noreferrer">http://192.168.236.177:30080/register<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><img src="/assets/img/beego2.41411ab9.png" alt="image-20190624195413483"></p> <ul><li>登陆界面</li></ul> <p><a href="http://192.168.236.177:30080/login" target="_blank" rel="noopener noreferrer">http://192.168.236.177:30080/login<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><img src="/assets/img/beego3.6c6bd2f2.png" alt="image-20190624195450072"></p> <ul><li>后端界面</li></ul> <p><img src="/assets/img/beego1.f66caca6.png" alt="image-20190624175022369"></p> <h1 id="七、k8s架构图"><a href="#七、k8s架构图" class="header-anchor">#</a> 七、k8s架构图</h1> <p><img src="/assets/img/architecture.7786145a.png" alt="k8s"></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">10/10/2020, 1:27:41 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5c147ff7.js" defer></script><script src="/assets/js/3.6f8da2b4.js" defer></script><script src="/assets/js/5.679f705d.js" defer></script><script src="/assets/js/4.66391984.js" defer></script>
  </body>
</html>
